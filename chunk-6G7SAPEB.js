import{a as F,b as G,c as I,e as J,f as K}from"./chunk-Y2HYYDXH.js";import{a as V}from"./chunk-PNVLM6ZI.js";import{a as H}from"./chunk-ADMM532F.js";import{b as c,c as a,l as M,m as E,n as D,o as B,s as h,t as T}from"./chunk-7C3VAOG7.js";import{E as N}from"./chunk-4BO4VVDC.js";import{$ as w,C as S,L as y,_ as k,da as v,g as C,ia as x,m as d,r as A,t as j}from"./chunk-GCV2IDJ5.js";import{a as u,b as m}from"./chunk-MON7YFGF.js";var L=c("[Offer] Load Offers",a()),R=c("[Offer] Load Offers Success",a()),Q=c("[Offer] Load Offers Failure",a()),W=c("[Offer] Load Filterd Offers",a()),X=c("[Offer] Load Filterd Offers Success",a()),z=c("[Offer] Load Filterd Offers Failure",a()),Y=c("[Offer] Create Offer",a()),b=c("[Offer] Create Offer Success",a()),Z=c("[Offer] Create Offer Failure",a()),ee=c("[Offer] Update Offer",a()),P=c("[Offer] Update Offer Success",a()),te=c("[Offer] Update Offer Failure",a()),re=c("[Offer] Delete Offer",a()),q=c("[Offer] Delete Offer Success",a()),fe=c("[Offer] Delete Offer Failure",a());var l=V({selectId:e=>e._id});var U=B("offers"),{selectAll:$,selectEntities:oe,selectIds:he,selectTotal:ie}=l.getSelectors(U),Ae=D($,oe,ie,U,(e,i,t,f)=>{let{pageNo:n,pageSize:s}=f,o=(n-1)*s,r=o+s,p=e.slice(o,r);return{entities:i,total:t,pageNo:n,pageSize:s,data:p}}),Se=D($,oe,ie,U,(e,i,t,f)=>{let{pageNo:n,pageSize:s}=f,o=n*s,r=o+s,p=e.slice(o,r);return{entities:i,total:t,pageNo:n,pageSize:s,data:p}}),xe=D(U,e=>e.totalData);var g=H,ce=(()=>{class e extends J{constructor(t){super(t),this.clientDataSubject=new C([]),this.clientData$=this.clientDataSubject.asObservable()}create(t){return this.http.post(`${g.API_URL}offers.json`,t)}getAllItems(t){let{queryParams:f}=this.initializeRequest(t);return this.http.get(`${g.API_URL}offers.json`).pipe(k(n=>{this.clientDataSubject.next(n.data)}))}updateItem(t,f){return this.http.put(`${g.API_URL}offers.json`,f)}deleteItem(t){return this.http.delete(`${g.API_URL}offers.json`)}getItem(t){throw new Error("Method not implemented.")}checkPhone(t){let f={};f.phone=t,f.pageNo=50;let{queryParams:n}=this.initializeRequest(f);return this.http.get(`${g.API_URL}/offers/check-phone/${t}?${n}`)}search(t,f){let{queryParams:n}=this.initializeRequest(f);return this.http.get(`${g.API_URL}/offers/search/${t}?${n}`)}static{this.\u0275fac=function(f){return new(f||e)(x(N))}}static{this.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ue=(()=>{class e{constructor(t,f,n){this.actions$=t,this.offersService=f,this.store=n,this.getAllItems$=F(()=>this.actions$.pipe(I(L),w(this.store.pipe(E($))),y(([s,o])=>o.length===0?this.offersService.getAllItems(s.request).pipe(A(r=>{let p=r.data.map(O=>m(u({},O),{id:O.offer_id,_id:O.offer_id})),_=r.totalData;return R({offers:p,totalData:_})}),S(r=>d(z({error:r})))):d()))),this.getFilterdItems$=F(()=>this.actions$.pipe(I(W),w(this.store.pipe(E($))),y(([s,o])=>o.length===0?this.offersService.getAllItems(s.request).pipe(A(r=>{let p=r.data.map(O=>m(u({},O),{id:O.offer_id,_id:O.offer_id})),_=r.totalData;return X({offers:p,totalData:_})}),S(r=>d(z({error:r})))):d()))),this.createOffer$=F(()=>this.actions$.pipe(I(Y),j(({offer:s})=>this.offersService.create(s).pipe(A(o=>{let r=o.data[0];return b({offer:r})}),S(o=>d(Z({error:o}))))))),this.updateOffer$=F(()=>this.actions$.pipe(I(ee),j(({id:s,newItem:o})=>this.offersService.updateItem(s,o).pipe(A(r=>{let p=r.data[0];return P({offer:p})}),S(r=>d(te({error:r}))))))),this.deleteOffer$=F(()=>this.actions$.pipe(I(re),j(({offerId:s})=>this.offersService.deleteItem(s).pipe(A(()=>q({offerId:s})),S(o=>d(fe({error:o})))))))}static{this.\u0275fac=function(f){return new(f||e)(x(G),x(ce),x(M))}}static{this.\u0275prov=v({token:e,factory:e.\u0275fac})}}return e})();var ae=l.getInitialState(new K);var Me=T(ae,h(L,(e,{pageNo:i,pageSize:t,sortBy:f,sortOrder:n,filterBy:s,filterValue:o,findById:r})=>m(u({},e),{pageNo:i,pageSize:t,loading:!0,error:null,sortBy:f,sortOrder:n,filterBy:s,filterValue:o,findById:r})),h(R,(e,{offers:i,totalData:t})=>l.setAll(i,m(u({},e),{totalData:t,loading:!1}))),h(Q,(e,{error:i})=>m(u({},e),{error:i,loading:!1})),h(b,(e,{offer:i})=>l.addOne(i,e)),h(P,(e,{offer:i})=>l.updateOne({id:i._id,changes:i},e)),h(q,(e,{offerId:i})=>l.removeOne(i,e)));export{L as a,W as b,Y as c,ee as d,re as e,oe as f,ie as g,Se as h,Ue as i,Me as j};
