import{a as F,b as V,c as I,e as G,f as J,g as K}from"./chunk-G7GKDBDS.js";import{a as H}from"./chunk-MXTATJDI.js";import{b as i,c as d,l as N,m as E,n as C,o as B,s as f,t as T}from"./chunk-VHK6HW5T.js";import{r as M}from"./chunk-CBDC4O62.js";import{B as S,K as y,Z as O,_ as w,ca as j,g as z,ha as x,m as n,r as A,t as $}from"./chunk-WWR4BG2S.js";import{a as m,b as h}from"./chunk-MON7YFGF.js";var v=i("[Product] Load Products",d()),D=i("[Product] Load Products Success",d()),R=i("[Product] Load Products Failure",d()),Q=i("[Product] Load Filterd Products",d()),W=i("[Product] Load Filterd Products Success",d()),X=i("[Product] Load Filterd Products Failure",d()),Y=i("[Product] Create Product",d()),L=i("[Product] Create Product Success",d()),Z=i("[Product] Create Product Failure",d()),tt=i("[Product] Update Product",d()),b=i("[Product] Update Product Success",d()),et=i("[Product] Update Product Failure",d()),rt=i("[Product] Delete Product",d()),q=i("[Product] Delete Product Success",d()),ot=i("[Product] Delete Product Failure",d());var p=G({selectId:t=>t._id});var k=B("products"),{selectAll:U,selectEntities:dt,selectIds:ft,selectTotal:ut}=p.getSelectors(k),At=C(U,dt,ut,k,(t,u,e,o)=>{let{pageNo:a,pageSize:c}=o,s=a*c,r=s+c,l=t.slice(s,r);return{entities:u,total:e,pageNo:a,pageSize:c,data:l}}),St=C(k,t=>t.totalData);var g=H,st=(()=>{class t extends J{constructor(e){super(e),this.clientDataSubject=new z([]),this.clientData$=this.clientDataSubject.asObservable()}create(e){return this.http.post(`${g.API_URL}products.json`,e)}getAllItems(e){let{queryParams:o}=this.initializeRequest(e);return this.http.get(`${g.API_URL}products.json`).pipe(O(a=>{this.clientDataSubject.next(a.data)}))}updateItem(e,o){return this.http.put(`${g.API_URL}products.json`,o)}deleteItem(e){return this.http.delete(`${g.API_URL}products.json`)}getItem(e){throw new Error("Method not implemented.")}checkProduct(e){let o={};o.phone=e,o.pageNo=50;let{queryParams:a}=this.initializeRequest(o);return this.http.get(`${g.API_URL}/products/check-phone/${e}?${a}`)}search(e,o){let{queryParams:a}=this.initializeRequest(o);return this.http.get(`${g.API_URL}/products/search/${e}?${a}`)}static{this.\u0275fac=function(o){return new(o||t)(x(M))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ut=(()=>{class t{constructor(e,o,a){this.actions$=e,this.productsService=o,this.store=a,this.getAllItems$=F(()=>this.actions$.pipe(I(v),w(this.store.pipe(E(U))),y(([c,s])=>s.length===0?this.productsService.getAllItems(c.request).pipe(A(r=>{let l=r.data.map(P=>h(m({},P),{id:P.product_id,_id:P.product_id})),_=r.totalData;return D({products:l,totalData:_})}),S(r=>n(R({error:r})))):n()))),this.getFilterdItems$=F(()=>this.actions$.pipe(I(Q),w(this.store.pipe(E(U))),y(([c,s])=>(console.log("data --->",s,c),s.length===0?this.productsService.getAllItems(c.request).pipe(A(r=>{let l=r.data.map(P=>h(m({},P),{id:P.product_id,_id:P.product_id})),_=r.totalData;return W({product:l,totalData:_})}),S(r=>n(X({error:r})))):n())))),this.createProduct$=F(()=>this.actions$.pipe(I(Y),$(({product:c})=>this.productsService.create(c).pipe(A(s=>{let r=s.data[0];return L({product:r})}),S(s=>n(Z({error:s}))))))),this.updateProduct$=F(()=>this.actions$.pipe(I(tt),$(({id:c,newItem:s})=>this.productsService.updateItem(c,s).pipe(A(r=>{let l=r.data[0];return b({product:l})}),S(r=>n(et({error:r}))))))),this.deleteProduct$=F(()=>this.actions$.pipe(I(rt),$(({productId:c})=>this.productsService.deleteItem(c).pipe(A(()=>q({productId:c})),S(s=>n(ot({error:s})))))))}static{this.\u0275fac=function(o){return new(o||t)(x(V),x(st),x(N))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})();var it=p.getInitialState(new K);var Mt=T(it,f(v,(t,{pageNo:u,pageSize:e,sortBy:o,sortOrder:a,filterBy:c,filterValue:s,findById:r})=>h(m({},t),{pageNo:u,pageSize:e,loading:!0,error:null,sortBy:o,sortOrder:a,filterBy:c,filterValue:s,findById:r})),f(D,(t,{products:u,totalData:e})=>p.setAll(u,h(m({},t),{totalData:e,loading:!1}))),f(R,(t,{error:u})=>h(m({},t),{error:u,loading:!1})),f(L,(t,{product:u})=>p.addOne(u,t)),f(b,(t,{product:u})=>p.updateOne({id:u._id,changes:u},t)),f(q,(t,{productId:u})=>p.removeOne(u,t)));export{v as a,Q as b,Y as c,tt as d,rt as e,dt as f,ut as g,At as h,Ut as i,Mt as j};
