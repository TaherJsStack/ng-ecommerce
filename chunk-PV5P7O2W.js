import{a as F,b as G,c as I,e as J,f as K}from"./chunk-LO27TSUG.js";import{a as H}from"./chunk-62WRAV4J.js";import{a as V}from"./chunk-FRVBFDPB.js";import{b as o,c,l as M,m as z,n as D,o as B,s as f,t as T}from"./chunk-ZWB3OEA7.js";import{E as O}from"./chunk-EKAGKNH6.js";import{C as S,N as w,aa as N,ba as E,fa as v,g as k,ka as x,m as C,r as A,t as j}from"./chunk-UXABPLNP.js";import{a as m,b as h}from"./chunk-MON7YFGF.js";var L=o("[Client] Load Clients",c()),R=o("[Client] Load Clients Success",c()),b=o("[Client] Load Clients Failure",c()),Q=o("[Client] Load Filterd Clients",c()),W=o("[Client] Load Filterd Clients Success",c()),X=o("[Client] Load Filterd Clients Failure",c()),Y=o("[Client] Create Client",c()),P=o("[Client] Create Client Success",c()),Z=o("[Client] Create Client Failure",c()),tt=o("[Client] Update Client",c()),q=o("[Client] Update Client Success",c()),et=o("[Client] Update Client Failure",c()),it=o("[Client] Delete Client",c()),U=o("[Client] Delete Client Success",c()),nt=o("[Client] Delete Client Failure",c());var d=V({selectId:t=>t._id});var _=B("clients"),{selectAll:$,selectEntities:rt,selectIds:ft,selectTotal:lt}=d.getSelectors(_),At=D($,rt,lt,_,(t,l,e,n)=>{let{pageNo:a,pageSize:s}=n,r=(a-1)*s,i=r+s,p=t.slice(r,i);return{entities:l,total:e,pageNo:a,pageSize:s,data:p}}),St=D($,rt,lt,_,(t,l,e,n)=>{let{pageNo:a,pageSize:s}=n,r=a*s,i=r+s,p=t.slice(r,i);return{entities:l,total:e,pageNo:a,pageSize:s,data:p}}),xt=D(_,t=>t.totalData);var g=H,ot=(()=>{class t extends J{constructor(e){super(e),this.clientDataSubject=new k([]),this.clientData$=this.clientDataSubject.asObservable()}create(e){return this.http.post(`${g.API_URL}clients.json`,e)}getAllItems(e){let{queryParams:n}=this.initializeRequest(e);return this.http.get(`${g.API_URL}clients.json`).pipe(N(a=>{this.clientDataSubject.next(a.data)}))}updateItem(e,n){return this.http.put(`${g.API_URL}clients.json`,n)}deleteItem(e){return this.http.delete(`${g.API_URL}clients.json`)}getItem(e){throw new Error("Method not implemented.")}checkPhone(e){let n={};n.phone=e,n.pageNo=50;let{queryParams:a}=this.initializeRequest(n);return this.http.get(`${g.API_URL}/clients/check-phone/${e}?${a}`)}search(e,n){let{queryParams:a}=this.initializeRequest(n);return this.http.get(`${g.API_URL}/clients/search/${e}?${a}`)}static{this.\u0275fac=function(n){return new(n||t)(x(O))}}static{this.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ut=(()=>{class t{constructor(e,n,a){this.actions$=e,this.clientsService=n,this.store=a,this.getAllItems$=F(()=>this.actions$.pipe(I(L),E(this.store.pipe(z($))),w(([s,r])=>r.length===0?this.clientsService.getAllItems(s.request).pipe(A(i=>{let p=i.data.map(u=>h(m({},u),{id:u.user_id,_id:u.user_id})),y=i.totalData;return R({clients:p,totalData:y})}),S(i=>C(b({error:i})))):C()))),this.getFilterdItems$=F(()=>this.actions$.pipe(I(Q),E(this.store.pipe(z($))),w(([s,r])=>r.length===0?this.clientsService.getAllItems(s.request).pipe(A(i=>{let p=i.data.map(u=>h(m({},u),{id:u.user_id,_id:u.user_id})),y=i.totalData;return W({clients:p,totalData:y})}),S(i=>C(X({error:i})))):C()))),this.createClient$=F(()=>this.actions$.pipe(I(Y),j(({client:s})=>this.clientsService.create(s).pipe(A(r=>{let i=r.data[0];return P({client:i})}),S(r=>C(Z({error:r}))))))),this.updateClient$=F(()=>this.actions$.pipe(I(tt),j(({id:s,newItem:r})=>this.clientsService.updateItem(s,r).pipe(A(i=>{let p=i.data[0];return q({client:p})}),S(i=>C(et({error:i}))))))),this.deleteClient$=F(()=>this.actions$.pipe(I(it),j(({clientId:s})=>this.clientsService.deleteItem(s).pipe(A(()=>U({clientId:s})),S(r=>C(nt({error:r})))))))}static{this.\u0275fac=function(n){return new(n||t)(x(G),x(ot),x(M))}}static{this.\u0275prov=v({token:t,factory:t.\u0275fac})}}return t})();var ct=d.getInitialState(new K);var Mt=T(ct,f(L,(t,{pageNo:l,pageSize:e,sortBy:n,sortOrder:a,filterBy:s,filterValue:r,findById:i})=>h(m({},t),{pageNo:l,pageSize:e,loading:!0,error:null,sortBy:n,sortOrder:a,filterBy:s,filterValue:r,findById:i})),f(R,(t,{clients:l,totalData:e})=>d.setAll(l,h(m({},t),{totalData:e,loading:!1}))),f(b,(t,{error:l})=>h(m({},t),{error:l,loading:!1})),f(P,(t,{client:l})=>d.addOne(l,t)),f(q,(t,{client:l})=>d.updateOne({id:l._id,changes:l},t)),f(U,(t,{clientId:l})=>d.removeOne(l,t)));export{L as a,Q as b,Y as c,tt as d,it as e,rt as f,lt as g,St as h,Ut as i,Mt as j};
