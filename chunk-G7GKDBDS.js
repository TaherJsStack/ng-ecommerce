import{b as se,j as ce,l as $,n as N,p as J,q as Y}from"./chunk-VHK6HW5T.js";import{A as C,Ac as oe,B as Q,F as W,Fa as ie,G as ee,I as te,K as ne,N as K,Q as re,c as X,ca as x,da as D,f as Z,fa as S,ha as g,ia as U,pa as k,r as _,t as G,z as H}from"./chunk-WWR4BG2S.js";import{a as m,b as A}from"./chunk-MON7YFGF.js";var Fe={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},P="__@ngrx/effects_create__";function ht(e,s={}){let t=s.functional?e:e(),n=m(m({},Fe),s);return Object.defineProperty(t,P,{value:n}),t}function Re(e){return Object.getOwnPropertyNames(e).filter(n=>e[n]&&e[n].hasOwnProperty(P)?e[n][P].hasOwnProperty("dispatch"):!1).map(n=>{let d=e[n][P];return m({propertyName:n},d)})}function je(e){return Re(e)}function de(e){return Object.getPrototypeOf(e)}function Te(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function le(e){return typeof e=="function"}function ue(e){return e.filter(le)}function Ne(e){return e instanceof S||le(e)}function we(e,s,t){let n=de(e),l=!!n&&n.constructor.name!=="Object"?n.constructor.name:null,y=je(e).map(({propertyName:M,dispatch:b,useEffectsErrorHandler:R})=>{let F=typeof e[M]=="function"?e[M]():e[M],v=R?t(F,s):F;return b===!1?v.pipe(ee()):v.pipe(re()).pipe(_(w=>({effect:e[M],notification:w,propertyName:M,sourceName:l,sourceInstance:e})))});return H(...y)}var Ae=10;function pe(e,s,t=Ae){return e.pipe(Q(n=>(s&&s.handleError(n),t<=1?e:pe(e,s,t-1))))}var yt=(()=>{class e extends X{constructor(t){super(),t&&(this.source=t)}lift(t){let n=new e;return n.source=this,n.operator=t,n}static{this.\u0275fac=function(n){return new(n||e)(g(ce))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Et(...e){return C(s=>e.some(t=>typeof t=="string"?t===s.type:t.type===s.type))}var he=new S("@ngrx/effects Internal Root Guard"),V=new S("@ngrx/effects User Provided Effects"),L=new S("@ngrx/effects Internal Root Effects"),ye=new S("@ngrx/effects Internal Root Effects Instances"),fe=new S("@ngrx/effects Internal Feature Effects"),Ee=new S("@ngrx/effects Internal Feature Effects Instance Groups"),Be=new S("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>pe}),ge="@ngrx/effects/init",gt=se(ge);function _e(e,s){if(e.notification.kind==="N"){let t=e.notification.value;!Ce(t)&&s.handleError(new Error(`Effect ${xe(e)} dispatched an invalid action: ${De(t)}`))}}function Ce(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function xe({propertyName:e,sourceInstance:s,sourceName:t}){let n=typeof s[e]=="function";return!!t?`"${t}.${String(e)}${n?"()":""}"`:`"${String(e)}()"`}function De(e){try{return JSON.stringify(e)}catch{return e}}var Ue="ngrxOnIdentifyEffects";function ke(e){return q(e,Ue)}var $e="ngrxOnRunEffects";function Ve(e){return q(e,$e)}var Pe="ngrxOnInitEffects";function ze(e){return q(e,Pe)}function q(e,s){return e&&s in e&&typeof e[s]=="function"}var Me=(()=>{class e extends Z{constructor(t,n){super(),this.errorHandler=t,this.effectsErrorHandler=n}addEffects(t){this.next(t)}toActions(){return this.pipe(K(t=>Te(t)?de(t):t),G(t=>t.pipe(K(Ge))),G(t=>{let n=t.pipe(ne(l=>He(this.errorHandler,this.effectsErrorHandler)(l)),_(l=>(_e(l,this.errorHandler),l.notification)),C(l=>l.kind==="N"&&l.value!=null),te()),d=t.pipe(W(1),C(ze),_(l=>l.ngrxOnInitEffects()));return H(n,d)}))}static{this.\u0275fac=function(n){return new(n||e)(g(ie),g(Be))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ge(e){return ke(e)?e.ngrxOnIdentifyEffects():""}function He(e,s){return t=>{let n=we(t,e,s);return Ve(t)?t.ngrxOnRunEffects(n):n}}var me=(()=>{class e{get isStarted(){return!!this.effectsSubscription}constructor(t,n){this.effectSources=t,this.store=n,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}static{this.\u0275fac=function(n){return new(n||e)(g(Me),g($))}}static{this.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Oe=(()=>{class e{constructor(t,n,d,l,y,M,b){this.sources=t,n.start();for(let R of l)t.addEffects(R);d.dispatch({type:ge})}addEffects(t){this.sources.addEffects(t)}static{this.\u0275fac=function(n){return new(n||e)(g(Me),g(me),g($),g(ye),g(J,8),g(Y,8),g(he,8))}}static{this.\u0275mod=k({type:e})}static{this.\u0275inj=D({})}}return e})(),Ke=(()=>{class e{constructor(t,n,d,l){let y=n.flat();for(let M of y)t.addEffects(M)}static{this.\u0275fac=function(n){return new(n||e)(g(Oe),g(Ee),g(J,8),g(Y,8))}}static{this.\u0275mod=k({type:e})}static{this.\u0275inj=D({})}}return e})(),Mt=(()=>{class e{static forFeature(...t){let n=t.flat(),d=ue(n);return{ngModule:Ke,providers:[d,{provide:fe,multi:!0,useValue:n},{provide:V,multi:!0,useValue:[]},{provide:Ee,multi:!0,useFactory:ae,deps:[fe,V]}]}}static forRoot(...t){let n=t.flat(),d=ue(n);return{ngModule:Oe,providers:[d,{provide:L,useValue:[n]},{provide:he,useFactory:Je},{provide:V,multi:!0,useValue:[]},{provide:ye,useFactory:ae,deps:[L,V]}]}}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=k({type:e})}static{this.\u0275inj=D({})}}return e})();function ae(e,s){let t=[];for(let n of e)t.push(...n);for(let n of s)t.push(...n);return t.map(n=>Ne(n)?U(n):n)}function Je(){let e=U(me,{optional:!0,skipSelf:!0}),s=U(L,{self:!0});if(!(s.length===1&&s[0].length===0)&&e)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var be=class{constructor(s){this.http=s}initializeRequest(s){let t="currentUser"in localStorage&&localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")||"{}"):{},n="branch"in localStorage&&localStorage.getItem("branch")?JSON.parse(localStorage.getItem("branch")||"{}"):{},d=A(m({},s),{filter:m({brancheId:n._id},s)}),l="";return d.filter&&(l+=`Filter=${JSON.stringify(d.filter)}`),{queryParams:l}}};function Ye(){return{ids:[],entities:{}}}function Le(){function e(s={}){return Object.assign(Ye(),s)}return{getInitialState:e}}function qe(){function e(s){let t=y=>y.ids,n=y=>y.entities,d=N(t,n,(y,M)=>y.map(b=>M[b])),l=N(t,y=>y.length);return s?{selectIds:N(s,t),selectEntities:N(s,n),selectAll:N(s,d),selectTotal:N(s,l)}:{selectIds:t,selectEntities:n,selectAll:d,selectTotal:l}}return{getSelectors:e}}var u=function(e){return e[e.EntitiesOnly=0]="EntitiesOnly",e[e.Both=1]="Both",e[e.None=2]="None",e}(u||{});function h(e){return function(t,n){let d={ids:[...n.ids],entities:m({},n.entities)},l=e(t,d);return l===u.Both?Object.assign({},n,d):l===u.EntitiesOnly?A(m({},n),{entities:d.entities}):n}}function I(e,s){let t=s(e);return oe()&&t===void 0&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",s.toString()),t}function ve(e){function s(a,o){let i=I(a,e);return i in o.entities?u.None:(o.ids.push(i),o.entities[i]=a,u.Both)}function t(a,o){let i=!1;for(let r of a)i=s(r,o)!==u.None||i;return i?u.Both:u.None}function n(a,o){return o.ids=[],o.entities={},t(a,o),u.Both}function d(a,o){let i=I(a,e);return i in o.entities?(o.entities[i]=a,u.EntitiesOnly):(o.ids.push(i),o.entities[i]=a,u.Both)}function l(a,o){let i=a.map(r=>d(r,o));switch(!0){case i.some(r=>r===u.Both):return u.Both;case i.some(r=>r===u.EntitiesOnly):return u.EntitiesOnly;default:return u.None}}function y(a,o){return M([a],o)}function M(a,o){let r=(a instanceof Array?a:o.ids.filter(c=>a(o.entities[c]))).filter(c=>c in o.entities).map(c=>delete o.entities[c]).length>0;return r&&(o.ids=o.ids.filter(c=>c in o.entities)),r?u.Both:u.None}function b(a){return Object.assign({},a,{ids:[],entities:{}})}function R(a,o,i){let r=i.entities[o.id],c=Object.assign({},r,o.changes),f=I(c,e),p=f!==o.id;return p&&(a[o.id]=f,delete i.entities[o.id]),i.entities[f]=c,p}function F(a,o){return v([a],o)}function v(a,o){let i={};return a=a.filter(c=>c.id in o.entities),a.length>0?a.filter(f=>R(i,f,o)).length>0?(o.ids=o.ids.map(f=>i[f]||f),u.Both):u.EntitiesOnly:u.None}function j(a,o){let r=o.ids.reduce((c,f)=>{let p=a(o.entities[f]);return p!==o.entities[f]&&c.push({id:f,changes:p}),c},[]).filter(({id:c})=>c in o.entities);return v(r,o)}function w({map:a,id:o},i){let r=i.entities[o];if(!r)return u.None;let c=a(r);return F({id:o,changes:c},i)}function z(a,o){return B([a],o)}function B(a,o){let i=[],r=[];for(let p of a){let E=I(p,e);E in o.entities?r.push({id:E,changes:p}):i.push(p)}let c=v(r,o),f=t(i,o);switch(!0){case(f===u.None&&c===u.None):return u.None;case(f===u.Both||c===u.Both):return u.Both;default:return u.EntitiesOnly}}return{removeAll:b,addOne:h(s),addMany:h(t),setAll:h(n),setOne:h(d),setMany:h(l),updateOne:h(F),updateMany:h(v),upsertOne:h(z),upsertMany:h(B),removeOne:h(y),removeMany:h(M),map:h(j),mapOne:h(w)}}function Xe(e,s){let{removeOne:t,removeMany:n,removeAll:d}=ve(e);function l(i,r){return y([i],r)}function y(i,r){let c=i.filter(f=>!(I(f,e)in r.entities));return c.length===0?u.None:(o(c,r),u.Both)}function M(i,r){return r.entities={},r.ids=[],y(i,r),u.Both}function b(i,r){let c=I(i,e);return c in r.entities?(r.ids=r.ids.filter(f=>f!==c),o([i],r),u.Both):l(i,r)}function R(i,r){let c=i.map(f=>b(f,r));switch(!0){case c.some(f=>f===u.Both):return u.Both;case c.some(f=>f===u.EntitiesOnly):return u.EntitiesOnly;default:return u.None}}function F(i,r){return j([i],r)}function v(i,r,c){if(!(r.id in c.entities))return!1;let f=c.entities[r.id],p=Object.assign({},f,r.changes),E=I(p,e);return delete c.entities[r.id],i.push(p),E!==r.id}function j(i,r){let c=[],f=i.filter(p=>v(c,p,r)).length>0;if(c.length===0)return u.None;{let p=r.ids,E=[];return r.ids=r.ids.filter((O,T)=>O in r.entities?!0:(E.push(T),!1)),o(c,r),!f&&E.every(O=>r.ids[O]===p[O])?u.EntitiesOnly:u.Both}}function w(i,r){let c=r.ids.reduce((f,p)=>{let E=i(r.entities[p]);return E!==r.entities[p]&&f.push({id:p,changes:E}),f},[]);return j(c,r)}function z({map:i,id:r},c){let f=c.entities[r];if(!f)return u.None;let p=i(f);return F({id:r,changes:p},c)}function B(i,r){return a([i],r)}function a(i,r){let c=[],f=[];for(let O of i){let T=I(O,e);T in r.entities?f.push({id:T,changes:O}):c.push(O)}let p=j(f,r),E=y(c,r);switch(!0){case(E===u.None&&p===u.None):return u.None;case(E===u.Both||p===u.Both):return u.Both;default:return u.EntitiesOnly}}function o(i,r){i.sort(s);let c=[],f=0,p=0;for(;f<i.length&&p<r.ids.length;){let E=i[f],O=I(E,e),T=r.ids[p],Ie=r.entities[T];s(E,Ie)<=0?(c.push(O),f++):(c.push(T),p++)}f<i.length?r.ids=c.concat(i.slice(f).map(e)):r.ids=c.concat(r.ids.slice(p)),i.forEach((E,O)=>{r.entities[e(E)]=E})}return{removeOne:t,removeMany:n,removeAll:d,addOne:h(l),updateOne:h(F),upsertOne:h(B),setAll:h(M),setOne:h(b),setMany:h(R),addMany:h(y),updateMany:h(j),upsertMany:h(a),map:h(w),mapOne:h(z)}}function Ft(e={}){let{selectId:s,sortComparer:t}={selectId:e.selectId??(y=>y.id),sortComparer:e.sortComparer??!1},n=Le(),d=qe(),l=t?Xe(s,t):ve(s);return m(m(m({selectId:s,sortComparer:t},n),d),l)}var Se=class{constructor(){this.error=null,this.loading=!1,this.selectedId=null,this.pageNo=1,this.pageSize=10,this.totalData=0,this.sortBy="",this.sortOrder="",this.filterBy="",this.filterValue="",this.findById=""}};export{ht as a,yt as b,Et as c,Mt as d,Ft as e,be as f,Se as g};
