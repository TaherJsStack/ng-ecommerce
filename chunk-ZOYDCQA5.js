import"./chunk-C5TACRRP.js";import{a as K,g as U,p as W,u as X,v as Z,w as C}from"./chunk-AQZREA66.js";import{a as J}from"./chunk-QP4RFEDT.js";import"./chunk-Y2HYYDXH.js";import"./chunk-PNVLM6ZI.js";import{A as P,B as k,C as Q,F as Y,G as x,H as G,c as $,d as q,e as N,f as R,h as u,y as O,z}from"./chunk-H37JQVY5.js";import"./chunk-A6LLAQQQ.js";import"./chunk-4OJSAVDG.js";import{f as M}from"./chunk-WUVIQKV2.js";import{l as I,m as A}from"./chunk-7C3VAOG7.js";import"./chunk-XNY2RDZO.js";import"./chunk-KINESLBU.js";import{d as H}from"./chunk-GD6QJMTW.js";import"./chunk-ESIOKCYV.js";import"./chunk-QNTLZT5W.js";import{e as m,g as h}from"./chunk-XMVNPIIY.js";import{k as E,p as j}from"./chunk-DL5MPEQY.js";import{t as L,x as V}from"./chunk-4BO4VVDC.js";import{Fb as s,Gb as p,Hb as T,Kb as B,Ob as d,Zb as w,a as S,c as v,eb as c,ec as D,fb as a,fc as F,pa as b,pc as f,qb as y,qc as g,zb as l}from"./chunk-GCV2IDJ5.js";import"./chunk-MON7YFGF.js";var _=function(i){return i.product_id="product_id",i.name="name",i.description="description",i.category_ids="category_ids",i.branch_ids="branch_id",i.brand="brand",i.images="images",i.tags="tags",i.created_by="created_by",i.created_at="created_at",i.updated_at="updated_at",i.combinations="combinations",i}(_||{});var Oe=(()=>{class i extends J{constructor(e,r,o,n,t,ee,te){super(),this.headerConfigService=e,this.tableConfigService=r,this.productsStore=o,this.dialogService=n,this.messageService=t,this.confirmationService=ee,this.router=te,this.sharedHeaderComponentConfig={},this.sharedTableComponentConfig={},this.productsList=[],this.productsList$=new v,this.totalData$=this.productsStore.pipe(A(Z)),this.fetchFilterdListSubscribe=new S,this.productEnum=_,o.select(C).subscribe(ie=>{this.productsList=ie.data,this.createConfigurationForTheSharedTableComponent()})}ngOnInit(){this.loadData(),this.selectProductssStore(),this.createConfigurationForTheSharedHeaderComponent(),this.createConfigurationForTheSharedTableComponent()}loadData(){console.log("loadProductss this.pageEvent --------->",this.pageEvent),this.constructRequest(),this.dispatchRequest(this.request)}dispatchRequest(e){this.productsStore.dispatch(K({request:this.request,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows,sortBy:this.sortBy,sortOrder:this.sortOrder,filterBy:this.filterBy,filterValue:this.filterValue,findById:this.findById}))}selectProductssStore(){this.productsList$=this.productsStore.select(X)}createConfigurationForTheSharedHeaderComponent(){this.sharedHeaderComponentConfig=this.headerConfigService.createConfig(new $().setTitle("Products").setShowHeader(!0).setShowTitle(!0).setShowAddButton(!0).setShowEditButton(!0).setShowDeleteButton(!0).setCustomClass("dynamic-class"))}createConfigurationForTheSharedTableComponent(){this.sharedTableComponentConfig=this.tableConfigService.createConfig(new z().setTitle("Products").setViewType(this.viewType).setShowHeader(!0).setShowFooter(!1).setCustomClass("dynamic-class").setData(this.productsList).setTableHeader(["id",this.productEnum.name,this.productEnum.images,this.productEnum.description,this.productEnum.combinations,this.productEnum.created_by,this.productEnum.tags,this.productEnum.brand,this.productEnum.category_ids,this.productEnum.created_at,this.productEnum.updated_at]).setDataList(this.productsList$))}onAddNewBtn(e){this.router.navigate(["/modules/products/form"])}onEditBtn(e){}onDeleteBtn(e){}onView(e){}onEdit(e){this.router.navigate([`/modules/products/form/${e.id}`])}onDelete(e){this.confirmationService.confirm({message:"Are you sure that you want to ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"You have accepted"}),this.productsStore.dispatch(W({productId:e.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}filterQueryValues(e){console.log("filterQueryValues",e),this.productsStore.dispatch(U({request:e,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows})),this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe(),this.fetchFilterdListSubscribe=this.productsStore.select(C).subscribe(r=>{console.log("fetchFilterdList --------->",r)})}onChangeViewType(e){console.log("onChangeViewType",e),this.viewType=e,this.createConfigurationForTheSharedTableComponent()}onPagePaginatorChange(e){this.pageEvent=e,this.loadData()}ngOnDestroy(){this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe()}static{this.\u0275fac=function(r){return new(r||i)(a(q),a(P),a(I),a(u),a(h),a(m),a(E))}}static{this.\u0275cmp=b({type:i,selectors:[["app-data-list"]],standalone:!0,features:[D([u,h,m]),y,F],decls:11,vars:8,consts:[[3,"onAddNewBtn","onEditBtn","onDeleteBtn","config"],[3,"filterFormvalues","viewTypeValue"],[3,"onViewBtn","onEditBtn","onDeleteBtn","config","length"],["TabelContent",""],[3,"onPagePaginatorChange","length"]],template:function(r,o){r&1&&(s(0,"p"),w(1,"data-list works!"),p(),T(2,"p-toast")(3,"p-confirmDialog"),s(4,"app-component-header",0),d("onAddNewBtn",function(t){return o.onAddNewBtn(t)})("onEditBtn",function(t){return o.onEditBtn(t)})("onDeleteBtn",function(t){return o.onDeleteBtn(t)}),p(),s(5,"app-filters",1),d("filterFormvalues",function(t){return o.filterQueryValues(t)})("viewTypeValue",function(t){return o.onChangeViewType(t)}),p(),s(6,"app-table-container",2),f(7,"async"),d("onViewBtn",function(t){return o.onView(t)})("onEditBtn",function(t){return o.onEdit(t)})("onDeleteBtn",function(t){return o.onDelete(t)}),B(8,3),p(),s(9,"app-paginator",4),f(10,"async"),d("onPagePaginatorChange",function(t){return o.onPagePaginatorChange(t)}),p()),r&2&&(c(4),l("config",o.sharedHeaderComponentConfig),c(2),l("config",o.sharedTableComponentConfig)("length",g(7,4,o.totalData$)||0),c(3),l("length",g(10,6,o.totalData$)||0))},dependencies:[V,L,H,N,R,O,G,x,Y,Q,k,M,j]})}}return i})();export{Oe as DataListComponent};
