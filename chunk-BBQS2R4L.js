import{a as X}from"./chunk-LYIEBZII.js";import{A as k,B as x,E as J,F as K,G as W,c as $,d as H,e as M,f as q,h as f,i as z,j as O,v as R,w as Q,x as Y,y as G,z as U}from"./chunk-DFMEOWCO.js";import{f as N}from"./chunk-7B2LA7N4.js";import"./chunk-Y7MV3CSA.js";import{a as Z,b as ee,c as te,d as ie,e as oe,f as ne,g as re,h as v}from"./chunk-YOHSCYLX.js";import"./chunk-5SPO2ULR.js";import"./chunk-PMIXLXAC.js";import"./chunk-FDANLT4R.js";import"./chunk-LB2C25I3.js";import"./chunk-GL5CIJKG.js";import"./chunk-Q77QSA2R.js";import"./chunk-YBXBVZSY.js";import"./chunk-MZE32LOX.js";import"./chunk-S6EMH63M.js";import"./chunk-RAWSUYSJ.js";import{e as u,g as h}from"./chunk-H3ONGKXQ.js";import"./chunk-4YRY4IP2.js";import"./chunk-L7L4RKUY.js";import{l as L,m as j}from"./chunk-5JVEGXLZ.js";import"./chunk-BXWG62GK.js";import"./chunk-I3TFT3JE.js";import{d as V}from"./chunk-DB6LPKCG.js";import{t as I,x as A}from"./chunk-YR4PHHHU.js";import{Db as c,Jb as l,Kb as m,Lb as F,Ob as w,Sb as p,a as b,c as E,ib as d,ic as P,jb as s,jc as D,m as a,ra as T,tc as _,ub as B,uc as C}from"./chunk-W3XNKEV5.js";import{a as y,b as g}from"./chunk-MON7YFGF.js";var S=function(n){return n.employee_id="employee_id",n.branch_id="branch_id",n.user_id="user_id",n.position="position",n.hire_date="hire_date",n.salary="salary",n.contact_number="contact_number",n.email="email",n.status="status",n.shift_schedule="shift_schedule",n}(S||{});var ze=(()=>{class n extends X{constructor(i,e,t,r,o,se,ae,le){super(),this.headerConfigService=i,this.tableConfigService=e,this.employeesStore=t,this.formBuilderService=r,this.dialogService=o,this.messageService=se,this.confirmationService=ae,this.formBuilderPrimengService=le,this.sharedHeaderComponentConfig={},this.sharedTableComponentConfig={},this.employeesList=[],this.employeesList$=new E,this.totalData$=this.employeesStore.pipe(j(re)),this.fetchFilterdListSubscribe=new b,this.employeeEnum=S,t.select(v).subscribe(me=>{this.employeesList=me.data,this.createConfigurationForTheSharedTableComponent()})}ngOnInit(){this.loadData(),this.selectEmployeesStore(),this.createConfigurationForTheSharedHeaderComponent(),this.createConfigurationForTheSharedTableComponent()}loadData(){console.log("loadEmployees this.pageEvent --------->",this.pageEvent),this.constructRequest(),this.dispatchRequest(this.request)}dispatchRequest(i){this.employeesStore.dispatch(Z({request:this.request,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows,sortBy:this.sortBy,sortOrder:this.sortOrder,filterBy:this.filterBy,filterValue:this.filterValue,findById:this.findById}))}selectEmployeesStore(){this.employeesList$=this.employeesStore.select(ne)}createConfigurationForTheSharedHeaderComponent(){this.sharedHeaderComponentConfig=this.headerConfigService.createConfig(new $().setTitle("Employee").setShowHeader(!0).setShowTitle(!0).setShowAddButton(!0).setShowEditButton(!1).setShowDeleteButton(!1).setCustomClass("dynamic-class"))}createConfigurationForTheSharedTableComponent(){this.sharedTableComponentConfig=this.tableConfigService.createConfig(new G().setTitle("Employee").setViewType(this.viewType).setShowHeader(!0).setShowFooter(!1).setCustomClass("dynamic-class").setData(this.employeesList).setTableHeader(["id",this.employeeEnum.user_id,this.employeeEnum.email,this.employeeEnum.status,this.employeeEnum.contact_number,this.employeeEnum.salary,this.employeeEnum.position,this.employeeEnum.branch_id,this.employeeEnum.shift_schedule,this.employeeEnum.hire_date]).setDataList(this.employeesList$))}createConfigurationForFormBuilderComponent(){this.formBuilderPrimengService.addPDropdownField(this.employeeEnum.user_id,this.employeeEnum.user_id,a([{id:"user_id",name:"user_id 111"},{id:"user_id",name:"user_id 222"}]),!0,[]).addPInputTextField(this.employeeEnum.email,this.employeeEnum.email,`Enter ${this.employeeEnum.email}`,!0).addPInputTextField(this.employeeEnum.contact_number,this.employeeEnum.contact_number,`Enter ${this.employeeEnum.contact_number}`,!0).addPInputNumberField(this.employeeEnum.salary,this.employeeEnum.salary,`Enter ${this.employeeEnum.salary}`,!0).addPDropdownField(this.employeeEnum.status,this.employeeEnum.status,a([{id:"Active",name:"Active"},{id:"Inactive",name:"Inactive"}]),!0,[]).addPDropdownField(this.employeeEnum.position,this.employeeEnum.position,a([{id:"Active",name:"Active"},{id:"Inactive",name:"Inactive"}]),!0).addPDropdownField(this.employeeEnum.branch_id,this.employeeEnum.branch_id,a([{id:"Active",name:"Active"},{id:"Inactive",name:"Inactive"}]),!0).addPCalendarField(this.employeeEnum.shift_schedule,this.employeeEnum.shift_schedule,`Enter ${this.employeeEnum.shift_schedule}`,!0)}onAddNewBtn(i){this.createConfigurationForFormBuilderComponent(),this.ref=this.dialogService.open(Q,{header:"Create Employee",width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFields:"this.formBuilderService.getFormFields()"}}),this.ref.onClose.subscribe(e=>{console.log("onClose",e),e&&this.employeesStore.dispatch(te({employee:e}));let t;if(e){let r=e?.buttonType;t=r?{summary:"No Product Selected",detail:`Pressed '${r}' button`}:{summary:"Product Selected",detail:e?.name}}else t={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(g(y({severity:"info"},t),{life:3e3}))}),this.ref.onMaximize.subscribe(e=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${e.maximized}`})})}onEditBtn(i){}onDeleteBtn(i){}onView(i){}onEdit(i){this.ref=this.dialogService.open(O,{header:"Update Employee "+i.data.email,width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFieldsValues:i.data}}),this.ref.onClose.subscribe(e=>{e&&(e.id=i.id,e._id=i.id,this.employeesStore.dispatch(ie({id:e.id,newItem:e})));let t;if(e){let r=e?.buttonType;t=r?{summary:"No Product Selected",detail:`Pressed '${r}' button`}:{summary:"Product Selected",detail:e?.name}}else t={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(g(y({severity:"info"},t),{life:3e3}))})}onDelete(i){this.confirmationService.confirm({message:"Are you sure that you want to ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"You have accepted"}),this.employeesStore.dispatch(oe({employeeId:i.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}filterQueryValues(i){console.log("filterQueryValues",i),this.employeesStore.dispatch(ee({request:i,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows})),this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe(),this.fetchFilterdListSubscribe=this.employeesStore.select(v).subscribe(e=>{console.log("fetchFilterdList --------->",e)})}onChangeViewType(i){console.log("onChangeViewType",i),this.viewType=i,this.createConfigurationForTheSharedTableComponent()}onPagePaginatorChange(i){this.pageEvent=i,this.loadData()}ngOnDestroy(){this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe()}static{this.\u0275fac=function(e){return new(e||n)(s(H),s(U),s(L),s(z),s(f),s(h),s(u),s(R))}}static{this.\u0275cmp=T({type:n,selectors:[["app-employees"]],standalone:!0,features:[P([f,h,u]),B,D],decls:9,vars:8,consts:[[3,"onAddNewBtn","onEditBtn","onDeleteBtn","config"],[3,"filterFormvalues","viewTypeValue"],[3,"onViewBtn","onEditBtn","onDeleteBtn","config","length"],["TabelContent",""],[3,"onPagePaginatorChange","length"]],template:function(e,t){e&1&&(F(0,"p-toast")(1,"p-confirmDialog"),l(2,"app-component-header",0),p("onAddNewBtn",function(o){return t.onAddNewBtn(o)})("onEditBtn",function(o){return t.onEditBtn(o)})("onDeleteBtn",function(o){return t.onDeleteBtn(o)}),m(),l(3,"app-filters",1),p("filterFormvalues",function(o){return t.filterQueryValues(o)})("viewTypeValue",function(o){return t.onChangeViewType(o)}),m(),l(4,"app-table-container",2),_(5,"async"),p("onViewBtn",function(o){return t.onView(o)})("onEditBtn",function(o){return t.onEdit(o)})("onDeleteBtn",function(o){return t.onDelete(o)}),w(6,3),m(),l(7,"app-paginator",4),_(8,"async"),p("onPagePaginatorChange",function(o){return t.onPagePaginatorChange(o)}),m()),e&2&&(d(2),c("config",t.sharedHeaderComponentConfig),d(2),c("config",t.sharedTableComponentConfig)("length",C(5,4,t.totalData$)||0),d(3),c("length",C(8,6,t.totalData$)||0))},dependencies:[A,I,V,M,q,Y,W,K,J,x,k,N]})}}return n})();export{ze as EmployeesComponent};
