import{a as S,b as G,c as x,e as J,f as K}from"./chunk-5SPO2ULR.js";import{a as H}from"./chunk-3MP2OBXP.js";import{a as V}from"./chunk-L7L4RKUY.js";import{b as a,c as n,l as M,m as C,n as j,o as B,s as m,t as T}from"./chunk-5JVEGXLZ.js";import{b as O}from"./chunk-I3TFT3JE.js";import{C as f,N as E,aa as N,ba as z,fa as $,g as k,ka as A,m as w,r as h,t as g}from"./chunk-W3XNKEV5.js";import{a as d,b as u}from"./chunk-MON7YFGF.js";var D=a("[Review] Load Reviews",n()),L=a("[Review] Load Reviews Success",n()),b=a("[Review] Load Reviews Failure",n()),Q=a("[Review] Load Filterd Reviews",n()),W=a("[Review] Load Filterd Reviews Success",n()),X=a("[Review] Load Filterd Reviews Failure",n()),Y=a("[Review] Create Review",n()),P=a("[Review] Create Review Success",n()),Z=a("[Review] Create Review Failure",n()),ee=a("[Review] Update Review",n()),q=a("[Review] Update Review Success",n()),te=a("[Review] Update Review Failure",n()),ie=a("[Review] Delete Review",n()),U=a("[Review] Delete Review Success",n()),re=a("[Review] Delete Review Failure",n());var l=V({selectId:e=>e._id});var _=B("reviews"),{selectAll:I,selectEntities:oe,selectIds:me,selectTotal:ce}=l.getSelectors(_),he=j(I,oe,ce,_,(e,c,t,s)=>{let{pageNo:p,pageSize:i}=s,o=(p-1)*i,r=o+i,v=e.slice(o,r);return{entities:c,total:t,pageNo:p,pageSize:i,data:v}}),fe=j(I,oe,ce,_,(e,c,t,s)=>{let{pageNo:p,pageSize:i}=s,o=p*i,r=o+i,v=e.slice(o,r);return{entities:c,total:t,pageNo:p,pageSize:i,data:v}}),Ae=j(_,e=>e.totalData);var F=H,ae=(()=>{class e extends J{constructor(t){super(t),this.clientDataSubject=new k([]),this.clientData$=this.clientDataSubject.asObservable()}create(t){return this.http.post(`${F.API_URL}review.json`,t)}getAllItems(t){let{queryParams:s}=this.initializeRequest(t);return this.http.get(`${F.API_URL}review.json`).pipe(N(p=>{this.clientDataSubject.next(p.data)}))}updateItem(t,s){return this.http.put(`${F.API_URL}review.json`,s)}deleteItem(t){return this.http.delete(`${F.API_URL}review.json`)}getItem(t){throw new Error("Method not implemented.")}checkPhone(t){let s={};s.phone=t,s.pageNo=50;let{queryParams:p}=this.initializeRequest(s);return this.http.get(`${F.API_URL}/reviews/check-phone/${t}?${p}`)}search(t,s){let{queryParams:p}=this.initializeRequest(s);return this.http.get(`${F.API_URL}/reviews/search/${t}?${p}`)}static{this.\u0275fac=function(s){return new(s||e)(A(O))}}static{this.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ue=(()=>{class e{constructor(t,s,p){this.actions$=t,this.reviewsService=s,this.store=p,this.getAllItems$=S(()=>this.actions$.pipe(x(D),z(this.store.pipe(C(I))),E(([i,o])=>o.length===0?this.reviewsService.getAllItems(i.request).pipe(h(r=>{let v=r.data.map(R=>u(d({},R),{id:R.user_id,_id:R.user_id})),y=r.totalData;return L({reviews:v,totalData:y})}),f(r=>w(b({error:r})))):w()))),this.getFilterdItems$=S(()=>this.actions$.pipe(x(Q),z(this.store.pipe(C(I))),E(([i,o])=>(console.log("data --->",o,i),o.length===0?this.reviewsService.getAllItems(i.request).pipe(h(r=>{let v=r.data.map(R=>u(d({},R),{id:R.review_id,_id:R.review_id})),y=r.totalData;return W({reviews:v,totalData:y})}),f(r=>w(X({error:r})))):w())))),this.createReview$=S(()=>this.actions$.pipe(x(Y),g(({review:i})=>this.reviewsService.create(i).pipe(h(o=>{let r=o.data[0];return P({review:r})}),f(o=>w(Z({error:o}))))))),this.updateReview$=S(()=>this.actions$.pipe(x(ee),g(({id:i,newItem:o})=>this.reviewsService.updateItem(i,o).pipe(h(r=>{let v=r.data[0];return q({review:v})}),f(r=>w(te({error:r}))))))),this.deleteReview$=S(()=>this.actions$.pipe(x(ie),g(({reviewId:i})=>this.reviewsService.deleteItem(i).pipe(h(()=>U({reviewId:i})),f(o=>w(re({error:o})))))))}static{this.\u0275fac=function(s){return new(s||e)(A(G),A(ae),A(M))}}static{this.\u0275prov=$({token:e,factory:e.\u0275fac})}}return e})();var ne=l.getInitialState(new K);var Me=T(ne,m(D,(e,{pageNo:c,pageSize:t,sortBy:s,sortOrder:p,filterBy:i,filterValue:o,findById:r})=>u(d({},e),{pageNo:c,pageSize:t,loading:!0,error:null,sortBy:s,sortOrder:p,filterBy:i,filterValue:o,findById:r})),m(L,(e,{reviews:c,totalData:t})=>l.setAll(c,u(d({},e),{totalData:t,loading:!1}))),m(b,(e,{error:c})=>u(d({},e),{error:c,loading:!1})),m(P,(e,{review:c})=>l.addOne(c,e)),m(q,(e,{review:c})=>l.updateOne({id:c._id,changes:c},e)),m(U,(e,{reviewId:c})=>l.removeOne(c,e)));export{D as a,Q as b,Y as c,ee as d,ie as e,oe as f,ce as g,fe as h,Ue as i,Me as j};
