import{a as V}from"./chunk-R75ZATG6.js";import{f as k,g as N,h as O,i as h,k as T,n as D,q as M,r as w,s as A,t as G,x as $}from"./chunk-A3IZZUYD.js";import{m as y,n as x,x as E,y as I}from"./chunk-EEICXFOG.js";import{$b as l,Fb as r,Gb as p,Ja as P,Ob as f,Pb as _,Zb as d,_b as g,eb as n,fb as S,fc as C,pa as u,pc as b,qc as F,xb as s,zb as o}from"./chunk-GCV2IDJ5.js";import{a as v}from"./chunk-MON7YFGF.js";function q(t,c){if(t&1&&(r(0,"option",6),d(1),p()),t&2){let e=c.$implicit;o("value",e),n(),g(e)}}function z(t,c){if(t&1&&(r(0,"div")(1,"label"),d(2),p(),r(3,"select",4),s(4,q,2,2,"option",5),p()()),t&2){let e=c.$implicit;n(2),l("",e.name,":"),n(),o("formControlName",e.name),n(),o("ngForOf",e.options)}}function H(t,c){if(t&1&&(r(0,"option",6),d(1),p()),t&2){let e=c.$implicit;o("value",e),n(),g(e)}}function J(t,c){if(t&1&&(r(0,"div")(1,"label"),d(2),p(),r(3,"select",4),s(4,H,2,2,"option",5),p()()),t&2){let e=c.$implicit;n(2),l("",e.name,":"),n(),o("formControlName",e.name),n(),o("ngForOf",e.options)}}function K(t,c){if(t&1&&(r(0,"p"),d(1),p()),t&2){let e=_(2);n(),l("In Stock: ",e.selectedCombination.stock,"")}}function L(t,c){t&1&&(r(0,"p"),d(1,"Out of Stock"),p())}function Q(t,c){if(t&1&&(r(0,"div")(1,"p"),d(2),b(3,"currency"),p(),s(4,K,2,1,"p",2)(5,L,2,0,"p",2),p()),t&2){let e=_();n(2),l("Price: ",F(3,3,e.selectedCombination.price),""),n(2),o("ngIf",e.selectedCombination.stock>0),n(),o("ngIf",e.selectedCombination.stock===0)}}var j=(()=>{class t{constructor(){this.dimensionChange=new P}onFormChange(){this.dimensionChange.emit(this.productForm.value)}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-product-presenter"]],inputs:{product:"product",selectedCombination:"selectedCombination",productForm:"productForm"},outputs:{dimensionChange:"dimensionChange"},standalone:!0,features:[C],decls:6,vars:5,consts:[[3,"ngSubmit","formGroup"],[4,"ngFor","ngForOf"],[4,"ngIf"],["type","submit",3,"disabled"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(a,i){a&1&&(r(0,"form",0),f("ngSubmit",function(){return i.onFormChange()}),s(1,z,5,3,"div",1)(2,J,5,3,"div",1)(3,Q,6,5,"div",2),r(4,"button",3),d(5,"Add to Cart"),p()()),a&2&&(o("formGroup",i.productForm),n(),o("ngForOf",i.product.dimensions),n(),o("ngForOf",i.product.attributes),n(),o("ngIf",i.selectedCombination),n(),o("disabled",!i.selectedCombination||i.selectedCombination.stock===0))},dependencies:[$,T,A,G,w,k,N,D,M,I,y,x,E],encapsulation:2})}}return t})();var ae=(()=>{class t{constructor(e){this.productService=e}ngOnInit(){this.productService.getProduct(1).subscribe(e=>{this.product=e;let a={};this.product.dimensions.forEach(m=>{a[m.name]=new h(m.options[0])});let i={};this.product.attributes.forEach(m=>{i[m.name]=new h(m.options[0])}),this.productForm=new O(v(v({},a),i)),this.checkStockAndPrice(this.productForm.value),this.productForm.valueChanges.subscribe(m=>{this.checkStockAndPrice(m)})})}onDimensionChange(e){this.checkStockAndPrice(e)}checkStockAndPrice(e){this.selectedCombination=this.productService.getCombinationDetails(this.product,e)}static{this.\u0275fac=function(a){return new(a||t)(S(V))}}static{this.\u0275cmp=u({type:t,selectors:[["app-product-container"]],standalone:!0,features:[C],decls:1,vars:3,consts:[[3,"dimensionChange","product","selectedCombination","productForm"]],template:function(a,i){a&1&&(r(0,"app-product-presenter",0),f("dimensionChange",function(B){return i.onDimensionChange(B)}),p()),a&2&&o("product",i.product)("selectedCombination",i.selectedCombination)("productForm",i.productForm)},dependencies:[j],encapsulation:2})}}return t})();export{ae as ProductContainerComponent};
