import{a as x,b as V,c as F,e as G,f as J,g as K}from"./chunk-G7GKDBDS.js";import{a as H}from"./chunk-7NOMDU42.js";import{b as s,c as o,l as M,m as w,n as E,o as N,s as f,t as T}from"./chunk-VHK6HW5T.js";import{r as O}from"./chunk-CBDC4O62.js";import{B as S,K as y,Z as z,_,ca as j,g as k,ha as b,m as p,r as A,t as $}from"./chunk-WWR4BG2S.js";import{a as u,b as m}from"./chunk-MON7YFGF.js";var I=s("[Branch] Load Branches",o()),v=s("[Branch] Load Branches Success",o()),D=s("[Branch] Load Branches Failure",o()),pe=s("[Branch] Load Filterd Branches",o()),Q=s("[Branch] Load Filterd Branches Success",o()),W=s("[Branch] Load Filterd Branches Failure",o()),X=s("[Branch] Create Branch",o()),L=s("[Branch] Create Branch Success",o()),Y=s("[Branch] Create Branch Failure",o()),Z=s("[Branch] Update Branch",o()),R=s("[Branch] Update Branch Success",o()),ee=s("[Branch] Update Branch Failure",o()),te=s("[Branch] Delete Branch",o()),q=s("[Branch] Delete Branch Success",o()),re=s("[Branch] Delete Branch Failure",o());var l=G();var C=N("branches"),{selectAll:P,selectEntities:se,selectIds:fe,selectTotal:oe}=l.getSelectors(C),Ae=E(P,se,oe,C,(e,i,t,r)=>{console.log("fetchFilterdList",r);let{pageNo:h,pageSize:a}=r,n=h*a,c=n+a,B=e.slice(n,c);return{entities:i,total:t,pageNo:h,pageSize:a,data:B}}),Se=E(C,e=>e.totalData);var g=H,ae=(()=>{class e extends J{constructor(t){super(t),this.clientDataSubject=new k([]),this.clientData$=this.clientDataSubject.asObservable()}create(t){return this.http.post(`${g.API_URL}branches.json`,t)}getAllItems(t){let{queryParams:r}=this.initializeRequest(t);return this.http.get(`${g.API_URL}branches.json`).pipe(z(h=>{this.clientDataSubject.next(h.data)}))}updateItem(t,r){return this.http.put(`${g.API_URL}branches.json`,r)}deleteItem(t){return this.http.delete(`${g.API_URL}branches.json`)}getItem(t){throw new Error("Method not implemented.")}checkPhone(t){let r={};r.phone=t,r.pageNo=50;let{queryParams:h}=this.initializeRequest(r);return this.http.get(`${g.API_URL}/bsranches/check-phone/${t}?${h}`)}search(t,r){let{queryParams:h}=this.initializeRequest(r);return this.http.get(`${g.API_URL}/bsranches/search/${t}?${h}`)}static{this.\u0275fac=function(r){return new(r||e)(b(O))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Pe=(()=>{class e{constructor(t,r,h){this.actions$=t,this.branchsService=r,this.store=h,this.getAllItems$=x(()=>this.actions$.pipe(F(I),_(this.store.pipe(w(P))),y(([a,n])=>n.length===0?this.branchsService.getAllItems(a.request).pipe(A(c=>{let B=c.data.map(d=>m(u({},d),{id:d.branch_id,_id:d.branch_id})),U=c.totalData;return v({branches:B,totalData:U})}),S(c=>p(D({error:c})))):p()))),this.getFilterdItems$=x(()=>this.actions$.pipe(F(I),_(this.store.pipe(w(P))),y(([a,n])=>(console.log("data --->",n,a),n.length===0?this.branchsService.getAllItems(a.request).pipe(A(c=>{let B=c.data.map(d=>m(u({},d),{id:d.branch_id,_id:d.branch_id})),U=c.totalData;return Q({branches:B,totalData:U})}),S(c=>p(W({error:c})))):p())))),this.createBranch$=x(()=>this.actions$.pipe(F(X),$(({branch:a})=>this.branchsService.create(a).pipe(A(n=>{let c=n.data[0];return L({branch:c})}),S(n=>p(Y({error:n}))))))),this.updateBranch$=x(()=>this.actions$.pipe(F(Z),$(({id:a,newItem:n})=>this.branchsService.updateItem(a,n).pipe(A(c=>{let B=c.data[0];return R({branch:B})}),S(c=>p(ee({error:c}))))))),this.deleteBranch$=x(()=>this.actions$.pipe(F(te),$(({branchId:a})=>this.branchsService.deleteItem(a).pipe(A(()=>q({branchId:a})),S(n=>p(re({error:n})))))))}static{this.\u0275fac=function(r){return new(r||e)(b(V),b(ae),b(M))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac})}}return e})();var ne=l.getInitialState(new K);var Oe=T(ne,f(I,(e,{pageNo:i,pageSize:t,sortBy:r,sortOrder:h,filterBy:a,filterValue:n,findById:c})=>m(u({},e),{pageNo:i,pageSize:t,loading:!0,error:null,sortBy:r,sortOrder:h,filterBy:a,filterValue:n,findById:c})),f(v,(e,{branches:i,totalData:t})=>l.setAll(i,m(u({},e),{totalData:t,loading:!1}))),f(D,(e,{error:i})=>m(u({},e),{error:i,loading:!1})),f(L,(e,{branch:i})=>l.addOne(i,e)),f(R,(e,{branch:i})=>l.updateOne({id:i._id,changes:i},e)),f(q,(e,{branchId:i})=>l.removeOne(i,e)));export{I as a,pe as b,X as c,Z as d,te as e,se as f,oe as g,Ae as h,Pe as i,Oe as j};
