import{a as ee}from"./chunk-KVKTAYWA.js";import{A as J,B as K,E as W,F as X,G as Z,c as q,d as M,e as H,f as z,h as b,i as R,j as Q,v as Y,w as G,x as U,y as k,z as x}from"./chunk-ZC7EBUGC.js";import{f as j}from"./chunk-7B2LA7N4.js";import"./chunk-Y7MV3CSA.js";import{a as te,b as ie,c as oe,d as re,e as ne,f as se,g as ae,h as le,i as de}from"./chunk-QC7TEHWC.js";import{a as ce,u as me}from"./chunk-XY6G34ZD.js";import"./chunk-5SPO2ULR.js";import"./chunk-PMIXLXAC.js";import"./chunk-FDANLT4R.js";import"./chunk-GZYRISK6.js";import"./chunk-Q77QSA2R.js";import"./chunk-YBXBVZSY.js";import"./chunk-MZE32LOX.js";import"./chunk-S6EMH63M.js";import"./chunk-RAWSUYSJ.js";import{e as u,g as f}from"./chunk-H3ONGKXQ.js";import{a as O,v as $}from"./chunk-D75AJNE6.js";import"./chunk-4YRY4IP2.js";import"./chunk-L7L4RKUY.js";import{l as g,m as h}from"./chunk-5JVEGXLZ.js";import"./chunk-BXWG62GK.js";import"./chunk-I3TFT3JE.js";import{d as N}from"./chunk-DB6LPKCG.js";import{t as V,x as E}from"./chunk-YR4PHHHU.js";import{Db as p,Jb as l,Kb as d,Lb as D,Ob as I,Sb as c,a as B,c as T,ib as m,ic as A,jb as a,jc as L,m as w,ra as F,tc as _,ub as P,uc as v}from"./chunk-W3XNKEV5.js";import{a as S,b as C}from"./chunk-MON7YFGF.js";var t=function(s){return s.blog_id="blog_id",s.title="title",s.content="content",s.author_id="author_id",s.status="status",s.tags="tags",s.image_url="image_url",s.category_id="category_id",s.created_at="created_at",s.updated_at="updated_at",s}(t||{});var We=(()=>{class s extends ee{constructor(o,e,i,n,r,pe,ge,he,ue,fe){super(),this.headerConfigService=o,this.tableConfigService=e,this.blogsStore=i,this.tagsStore=n,this.categoriesStore=r,this.formBuilderService=pe,this.formBuilderPrimengService=ge,this.dialogService=he,this.messageService=ue,this.confirmationService=fe,this.sharedHeaderComponentConfig={},this.sharedTableComponentConfig={},this.blogsList=[],this.blogsList$=new T,this.totalData$=this.blogsStore.pipe(h(ae)),this.request={pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows,sortBy:this.sortBy,sortOrder:this.sortOrder,filterBy:this.filterBy,filterValue:this.filterValue,findById:this.findById,brancheId:0},this.fetchFilterdListSubscribe=new B,this.tagsListObservable$=this.tagsStore.pipe(h(me)),this.categoriesListObservable$=this.categoriesStore.pipe(h($)),i.select(le).subscribe(y=>{console.log("fetchListPaginationSuccess blogsStore --------->",y),this.blogsList=y.data,this.createConfigurationForTheSharedTableComponent()}),n.dispatch(ce({request:this.request,pageNo:1,pageSize:1e4,sortBy:"name",sortOrder:"asc",filterBy:"",filterValue:"",findById:""})),r.dispatch(O({request:this.request,pageNo:1,pageSize:1e4,sortBy:"name",sortOrder:"asc",filterBy:"",filterValue:"",findById:""}))}ngOnInit(){this.loadData(),this.selectBlogsStore(),this.createConfigurationForTheSharedHeaderComponent(),this.createConfigurationForTheSharedTableComponent()}loadData(){this.constructRequest(),this.dispatchRequest(this.request)}dispatchRequest(o){this.blogsStore.dispatch(te({request:this.request,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows,sortBy:this.sortBy,sortOrder:this.sortOrder,filterBy:this.filterBy,filterValue:this.filterValue,findById:this.findById}))}selectBlogsStore(){this.blogsList$=this.blogsStore.select(se)}createConfigurationForTheSharedHeaderComponent(){this.sharedHeaderComponentConfig=this.headerConfigService.createConfig(new q().setTitle("Blog").setShowHeader(!0).setShowTitle(!0).setShowAddButton(!0).setShowEditButton(!1).setShowDeleteButton(!1).setCustomClass("dynamic-class"))}createConfigurationForTheSharedTableComponent(){this.sharedTableComponentConfig=this.tableConfigService.createConfig(new k().setTitle("Blog").setViewType(this.viewType).setShowHeader(!0).setShowFooter(!1).setCustomClass("dynamic-class").setData(this.blogsList).setTableHeader(["id",t.title,t.image_url,t.content,t.author_id,t.status,t.tags,t.category_id,t.created_at,t.updated_at]).setDataList(this.blogsList$))}createConfigurationForFormBuilderPrimengComponent(){this.formBuilderPrimengService.addPInputTextField(t.title,t.title,`Enter ${t.title}`,!0).addFileField(t.image_url,t.image_url,!0).addPMultiSelectField(t.tags,t.tags,this.tagsListObservable$,!0,!1).addPDropdownField(t.status,t.status,w([{id:"published",name:"published"},{id:"archived",name:"archived"},{id:"draft",name:"draft"}]),!0,[]).addPDropdownField(t.category_id,t.category_id,this.categoriesListObservable$,!0,[]).addPInputTextareaField(t.content,t.content,`Enter ${t.content}`,!0)}onAddNewBtn(o){this.createConfigurationForFormBuilderPrimengComponent(),this.ref&&this.ref.destroy(),this.ref=this.dialogService.open(G,{header:"Create Blog",width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFields:"this.formBuilderService.getFormFields()"}}),this.ref.onClose.subscribe(e=>{console.log("onClose",e),e&&this.blogsStore.dispatch(oe({blog:e}));let i;if(e){let n=e?.buttonType;i=n?{summary:"No Product Selected",detail:`Pressed '${n}' button`}:{summary:"Product Selected",detail:e?.name}}else i={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(C(S({severity:"info"},i),{life:3e3}))}),this.ref.onMaximize.subscribe(e=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${e.maximized}`})})}onEditBtn(o){}onDeleteBtn(o){}onView(o){}onEdit(o){this.ref=this.dialogService.open(Q,{header:"Update Blog "+o.data.title,width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFieldsValues:o.data}}),this.ref.onClose.subscribe(e=>{e&&(e.id=o.id,e._id=o.id,this.blogsStore.dispatch(re({id:e.id,newItem:e})));let i;if(e){let n=e?.buttonType;i=n?{summary:"No Product Selected",detail:`Pressed '${n}' button`}:{summary:"Product Selected",detail:e?.name}}else i={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(C(S({severity:"info"},i),{life:3e3}))})}onDelete(o){this.confirmationService.confirm({message:"Are you sure that you want to ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"You have accepted"}),this.blogsStore.dispatch(ne({blogId:o.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}filterQueryValues(o){console.log("filterQueryValues",o),this.blogsStore.dispatch(ie({request:o,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows})),this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe(),this.fetchFilterdListSubscribe=this.blogsStore.select(de).subscribe(e=>{console.log("fetchFilterdList --------->",e)})}onChangeViewType(o){console.log("onChangeViewType",o),this.viewType=o}onPagePaginatorChange(o){this.pageEvent=o,this.loadData()}ngOnDestroy(){this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe()}static{this.\u0275fac=function(e){return new(e||s)(a(M),a(x),a(g),a(g),a(g),a(R),a(Y),a(b),a(f),a(u))}}static{this.\u0275cmp=F({type:s,selectors:[["app-blog"]],standalone:!0,features:[A([b,f,u]),P,L],decls:9,vars:8,consts:[[3,"onAddNewBtn","onEditBtn","onDeleteBtn","config"],[3,"filterFormvalues","viewTypeValue"],[3,"onViewBtn","onEditBtn","onDeleteBtn","config","length"],["TabelContent",""],[3,"onPagePaginatorChange","length"]],template:function(e,i){e&1&&(D(0,"p-toast")(1,"p-confirmDialog"),l(2,"app-component-header",0),c("onAddNewBtn",function(r){return i.onAddNewBtn(r)})("onEditBtn",function(r){return i.onEditBtn(r)})("onDeleteBtn",function(r){return i.onDeleteBtn(r)}),d(),l(3,"app-filters",1),c("filterFormvalues",function(r){return i.filterQueryValues(r)})("viewTypeValue",function(r){return i.onChangeViewType(r)}),d(),l(4,"app-table-container",2),_(5,"async"),c("onViewBtn",function(r){return i.onView(r)})("onEditBtn",function(r){return i.onEdit(r)})("onDeleteBtn",function(r){return i.onDelete(r)}),I(6,3),d(),l(7,"app-paginator",4),_(8,"async"),c("onPagePaginatorChange",function(r){return i.onPagePaginatorChange(r)}),d()),e&2&&(m(2),p("config",i.sharedHeaderComponentConfig),m(2),p("config",i.sharedTableComponentConfig)("length",v(5,4,i.totalData$)||0),m(3),p("length",v(8,6,i.totalData$)||0))},dependencies:[E,V,N,H,z,U,Z,X,W,K,J,j]})}}return s})();export{We as BlogComponent};
