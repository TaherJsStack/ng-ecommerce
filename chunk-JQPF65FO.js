import{a as G}from"./chunk-ZHYFIMSC.js";import{c as y,d as u,f as N,g as A,h as E,k as O,l as D,n as P,o as k,p as I,q as T,v as V,x as w}from"./chunk-PA4I2Q35.js";import"./chunk-R4K2WD2X.js";import{m as x,x as S}from"./chunk-XJBCGK7A.js";import{Ab as f,Ca as _,Cb as s,Da as v,Ib as i,Jb as e,Kb as l,Ob as g,Rb as p,Sb as b,ac as r,hb as d,ib as h,ic as F,ra as C}from"./chunk-UXABPLNP.js";import"./chunk-MON7YFGF.js";function q(n,a){if(n&1&&(i(0,"div"),l(1,"input",15),e()),n&2){let t=a.index;d(),s("formControlName",t)}}function j(n,a){if(n&1){let t=g();i(0,"div")(1,"div",12)(2,"label"),r(3,"Dimension Name:"),e(),l(4,"input",13),i(5,"div",14)(6,"label"),r(7,"Options:"),e(),f(8,q,2,1,"div",8),i(9,"button",9),p("click",function(){let m=_(t).index,c=b();return v(c.addDimensionOption(m))}),r(10,"Add Option"),e()()()()}if(n&2){let t=a.index,o=b();d(),s("formGroupName",t),d(7),s("ngForOf",o.getDimensionOptionsControls(t))}}function M(n,a){if(n&1&&(i(0,"div"),l(1,"input",15),e()),n&2){let t=a.index;d(),s("formControlName",t)}}function B(n,a){if(n&1){let t=g();i(0,"div")(1,"div",12)(2,"label"),r(3,"Attribute Name:"),e(),l(4,"input",13),i(5,"div",14)(6,"label"),r(7,"Options:"),e(),f(8,M,2,1,"div",8),i(9,"button",9),p("click",function(){let m=_(t).index,c=b();return v(c.addAttributeOption(m))}),r(10,"Add Option"),e()()()()}if(n&2){let t=a.index,o=b();d(),s("formGroupName",t),d(7),s("ngForOf",o.getAttributesOptionsControls(t))}}var Q=(()=>{class n{constructor(t,o){this.fb=t,this.productService=o,this.productForm=new E({})}ngOnInit(){this.initForm()}initForm(){this.productForm=this.fb.group({name:["",u.required],price:[0,[u.required,u.min(0)]],stock:[0,[u.required,u.min(0)]],dimensions:this.fb.array([this.initDimension()]),attributes:this.fb.array([this.initAttribute()])})}initDimension(){return this.fb.group({name:["",u.required],options:this.fb.array([this.fb.control("")])})}initAttribute(){return this.fb.group({name:["",u.required],options:this.fb.array([this.fb.control("")])})}addDimension(){this.productForm.get("dimensions").push(this.initDimension())}addAttribute(){this.productForm.get("attributes").push(this.initAttribute())}getDimensionControls(){return this.productForm.get("dimensions").controls}getDimensionOptionsControls(t){return this.productForm.get(["dimensions",t,"options"]).controls}getAttributesControls(){return this.productForm.get("attributes").controls}getAttributesOptionsControls(t){return this.productForm.get(["attributes",t,"options"]).controls}addDimensionOption(t){this.productForm.get(["dimensions",t,"options"]).push(this.fb.control(""))}addAttributeOption(t){this.productForm.get(["attributes",t,"options"]).push(this.fb.control(""))}onSubmit(){if(this.productForm.valid){let t=this.productForm.value;this.productService.insertProduct(t).subscribe(o=>{console.log("Product inserted successfully",o)})}}static{this.\u0275fac=function(o){return new(o||n)(h(V),h(G))}}static{this.\u0275cmp=C({type:n,selectors:[["app-product-insert"]],standalone:!0,features:[F],decls:27,vars:4,consts:[[3,"ngSubmit","formGroup"],["for","name"],["id","name","formControlName","name","type","text"],["for","price"],["id","price","formControlName","price","type","number"],["for","stock"],["id","stock","formControlName","stock","type","number"],["formArrayName","dimensions"],[4,"ngFor","ngForOf"],["type","button",3,"click"],["formArrayName","attributes"],["type","submit",3,"disabled"],[3,"formGroupName"],["formControlName","name","type","text"],["formArrayName","options"],["type","text",3,"formControlName"]],template:function(o,m){o&1&&(i(0,"form",0),p("ngSubmit",function(){return m.onSubmit()}),i(1,"div")(2,"label",1),r(3,"Product Name:"),e(),l(4,"input",2),e(),i(5,"div")(6,"label",3),r(7,"Price:"),e(),l(8,"input",4),e(),i(9,"div")(10,"label",5),r(11,"Stock:"),e(),l(12,"input",6),e(),i(13,"div",7)(14,"h3"),r(15,"Dimensions"),e(),f(16,j,11,2,"div",8),i(17,"button",9),p("click",function(){return m.addDimension()}),r(18,"Add Dimension"),e()(),i(19,"div",10)(20,"h3"),r(21,"Attributes"),e(),f(22,B,11,2,"div",8),i(23,"button",9),p("click",function(){return m.addAttribute()}),r(24,"Add Attribute"),e()(),i(25,"button",11),r(26,"Submit"),e()()),o&2&&(s("formGroup",m.productForm),d(16),s("ngForOf",m.getDimensionControls()),d(6),s("ngForOf",m.getAttributesControls()),d(3),s("disabled",m.productForm.invalid))},dependencies:[S,x,w,O,y,D,N,A,P,T,k,I],encapsulation:2})}}return n})();export{Q as ProductInsertComponent};
