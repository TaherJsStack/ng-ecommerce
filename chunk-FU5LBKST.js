import{a as ne}from"./chunk-2A7TADK6.js";import{A as ee,B as te,E as ie,F as oe,G as re,c as Q,d as Y,e as G,f as U,h,i as k,j as x,v as J,w as K,x as W,y as X,z as Z}from"./chunk-WOELEOYT.js";import{f as R}from"./chunk-J2JYHL4Y.js";import"./chunk-SPBOXIZ7.js";import"./chunk-QBLTILV7.js";import"./chunk-LO27TSUG.js";import"./chunk-PMIXLXAC.js";import"./chunk-KDU5HLWA.js";import"./chunk-QZ6TUUVK.js";import"./chunk-W346UYTL.js";import"./chunk-PA4I2Q35.js";import"./chunk-MTU6N4QK.js";import"./chunk-YFSL42WZ.js";import{e as p,g as u}from"./chunk-7FV6G4R4.js";import{a as H,d as M,g as N,j as $,m as q,r as z,s as O,t as S}from"./chunk-MMIZXUU7.js";import"./chunk-4YRY4IP2.js";import"./chunk-FRVBFDPB.js";import{l as L,m as j}from"./chunk-ZWB3OEA7.js";import"./chunk-SPWQV7SM.js";import"./chunk-R4K2WD2X.js";import{d as A}from"./chunk-E7PRHJWB.js";import{t as I,x as V}from"./chunk-XJBCGK7A.js";import{Cb as m,Ib as s,Jb as c,Kb as w,Nb as E,Rb as d,a as v,c as b,hb as l,hc as D,ib as a,ic as P,m as T,ra as B,sc as C,tb as F,tc as _}from"./chunk-UXABPLNP.js";import{a as g,b as f}from"./chunk-MON7YFGF.js";var y=function(n){return n.category_id="category_id",n.name="name",n.description="description",n.parent_category_id="parent_category_id",n.image_url="image_url",n.created_by="created_by",n.status="status",n.created_at="created_at",n.updated_at="updated_at",n}(y||{});var ze=(()=>{class n extends ne{constructor(i,e,t,r,o,ae,se,ce){super(),this.headerConfigService=i,this.tableConfigService=e,this.categoriesStore=t,this.formBuilderService=r,this.dialogService=o,this.messageService=ae,this.confirmationService=se,this.formBuilderPrimengService=ce,this.sharedHeaderComponentConfig={},this.sharedTableComponentConfig={},this.categoriesList=[],this.categoriesList$=new b,this.totalData$=this.categoriesStore.pipe(j(O)),this.fetchFilterdListSubscribe=new v,this.categoryEnum=y,t.select(S).subscribe(de=>{this.categoriesList=de.data,this.createConfigurationForTheSharedTableComponent()})}ngOnInit(){this.loadData(),this.selectCategoriessStore(),this.createConfigurationForTheSharedHeaderComponent(),this.createConfigurationForTheSharedTableComponent()}loadData(){console.log("loadCategoriess this.pageEvent --------->",this.pageEvent),this.constructRequest(),this.dispatchRequest(this.request)}dispatchRequest(i){this.categoriesStore.dispatch(H({request:this.request,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows,sortBy:this.sortBy,sortOrder:this.sortOrder,filterBy:this.filterBy,filterValue:this.filterValue,findById:this.findById}))}selectCategoriessStore(){this.categoriesList$=this.categoriesStore.select(z)}createConfigurationForTheSharedHeaderComponent(){this.sharedHeaderComponentConfig=this.headerConfigService.createConfig(new Q().setTitle("Categories").setShowHeader(!0).setShowTitle(!0).setShowAddButton(!0).setShowEditButton(!1).setShowDeleteButton(!1).setCustomClass("dynamic-class"))}createConfigurationForTheSharedTableComponent(){this.sharedTableComponentConfig=this.tableConfigService.createConfig(new X().setTitle("Categories").setViewType(this.viewType).setShowHeader(!0).setShowFooter(!1).setCustomClass("dynamic-class").setData(this.categoriesList).setTableHeader(["id",this.categoryEnum.name,this.categoryEnum.image_url,this.categoryEnum.description,this.categoryEnum.created_by,this.categoryEnum.status,this.categoryEnum.created_at,this.categoryEnum.updated_at]).setDataList(this.categoriesList$))}createConfigurationForFormBuilderComponent(){this.formBuilderPrimengService.addPInputTextField(this.categoryEnum.name,this.categoryEnum.name,`Enter ${this.categoryEnum.name}`,!0).addFileField(this.categoryEnum.image_url,this.categoryEnum.image_url,!0).addPDropdownField(this.categoryEnum.status,this.categoryEnum.status,T([{id:"active",name:"active"},{id:"inactive",name:"inactive"}])).addPInputTextareaField(this.categoryEnum.description,this.categoryEnum.description,`Enter ${this.categoryEnum.description}`,!0)}onAddNewBtn(i){this.createConfigurationForFormBuilderComponent(),this.ref=this.dialogService.open(K,{header:"Create Categories",width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFields:"this.formBuilderService.getFormFields()"}}),this.ref.onClose.subscribe(e=>{console.log("onClose",e),e&&this.categoriesStore.dispatch(N({category:e}));let t;if(e){let r=e?.buttonType;t=r?{summary:"No Product Selected",detail:`Pressed '${r}' button`}:{summary:"Product Selected",detail:e?.name}}else t={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(f(g({severity:"info"},t),{life:3e3}))}),this.ref.onMaximize.subscribe(e=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${e.maximized}`})})}onEditBtn(i){}onDeleteBtn(i){}onView(i){}onEdit(i){this.ref=this.dialogService.open(x,{header:"Update Categories "+i.data.name,width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFieldsValues:i.data}}),this.ref.onClose.subscribe(e=>{e&&(e.id=i.id,e._id=i.id,this.categoriesStore.dispatch($({id:e.id,newItem:e})));let t;if(e){let r=e?.buttonType;t=r?{summary:"No Product Selected",detail:`Pressed '${r}' button`}:{summary:"Product Selected",detail:e?.name}}else t={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(f(g({severity:"info"},t),{life:3e3}))})}onDelete(i){this.confirmationService.confirm({message:"Are you sure that you want to ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"You have accepted"}),this.categoriesStore.dispatch(q({categoryId:i.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}filterQueryValues(i){console.log("filterQueryValues",i),this.categoriesStore.dispatch(M({request:i,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows})),this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe(),this.fetchFilterdListSubscribe=this.categoriesStore.select(S).subscribe(e=>{console.log("fetchFilterdList --------->",e)})}onChangeViewType(i){console.log("onChangeViewType",i),this.viewType=i,this.createConfigurationForTheSharedTableComponent()}onPagePaginatorChange(i){this.pageEvent=i,this.loadData()}ngOnDestroy(){this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe()}static{this.\u0275fac=function(e){return new(e||n)(a(Y),a(Z),a(L),a(k),a(h),a(u),a(p),a(J))}}static{this.\u0275cmp=B({type:n,selectors:[["app-categories"]],standalone:!0,features:[D([h,u,p]),F,P],decls:9,vars:8,consts:[[3,"onAddNewBtn","onEditBtn","onDeleteBtn","config"],[3,"filterFormvalues","viewTypeValue"],[3,"onViewBtn","onEditBtn","onDeleteBtn","config","length"],["TabelContent",""],[3,"onPagePaginatorChange","length"]],template:function(e,t){e&1&&(w(0,"p-toast")(1,"p-confirmDialog"),s(2,"app-component-header",0),d("onAddNewBtn",function(o){return t.onAddNewBtn(o)})("onEditBtn",function(o){return t.onEditBtn(o)})("onDeleteBtn",function(o){return t.onDeleteBtn(o)}),c(),s(3,"app-filters",1),d("filterFormvalues",function(o){return t.filterQueryValues(o)})("viewTypeValue",function(o){return t.onChangeViewType(o)}),c(),s(4,"app-table-container",2),C(5,"async"),d("onViewBtn",function(o){return t.onView(o)})("onEditBtn",function(o){return t.onEdit(o)})("onDeleteBtn",function(o){return t.onDelete(o)}),E(6,3),c(),s(7,"app-paginator",4),C(8,"async"),d("onPagePaginatorChange",function(o){return t.onPagePaginatorChange(o)}),c()),e&2&&(l(2),m("config",t.sharedHeaderComponentConfig),l(2),m("config",t.sharedTableComponentConfig)("length",_(5,4,t.totalData$)||0),l(3),m("length",_(8,6,t.totalData$)||0))},dependencies:[V,I,A,G,U,W,re,oe,ie,te,ee,R]})}}return n})();export{ze as CategoriesComponent};
