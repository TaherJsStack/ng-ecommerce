import{a as X}from"./chunk-D6OMNPGA.js";import{A as U,B as k,E as J,F as K,G as W,c as M,d as H,e as N,f as q,h,i as z,j as O,v as R,w as x,x as Q,y as Y,z as G}from"./chunk-PL47LHXP.js";import{f as $}from"./chunk-42JLVMS2.js";import"./chunk-IYFM5INL.js";import{a as Z,b as ee,c as te,d as ie,e as ne,f as oe,g as re,h as v}from"./chunk-NPA56BNZ.js";import"./chunk-Y2HYYDXH.js";import"./chunk-XNY2RDZO.js";import"./chunk-EPTBEGN2.js";import"./chunk-YYO27DDR.js";import"./chunk-RVWAFL5C.js";import"./chunk-A6LLAQQQ.js";import"./chunk-LYXAL2MR.js";import"./chunk-JEQUEBGQ.js";import{e as p,g as u}from"./chunk-QKJGR225.js";import"./chunk-PNVLM6ZI.js";import{l as j,m as L}from"./chunk-7C3VAOG7.js";import{d as A}from"./chunk-GD6QJMTW.js";import"./chunk-DL5MPEQY.js";import{t as I,x as V}from"./chunk-4BO4VVDC.js";import{Fb as a,Gb as l,Hb as E,Kb as F,Ob as d,a as y,c as w,eb as c,ec as P,fb as s,fc as D,m as C,pa as T,pc as _,qb as B,qc as S,zb as m}from"./chunk-GCV2IDJ5.js";import{a as f,b as g}from"./chunk-MON7YFGF.js";var b=function(n){return n.user_id="user_id",n.email="email",n.phone="phone",n.password="password",n.confirm_password="confirm_password",n.role="role",n.profile_picture_url="profile_picture_url",n.date_joined="date_joined",n.last_login="last_login",n.status="status",n.billing_address="billing_address",n.name="name",n.shipping_address="shipping_address",n}(b||{});var Re=(()=>{class n extends X{constructor(i,e,t,r,o,se,ae,le){super(),this.headerConfigService=i,this.tableConfigService=e,this.clientsStore=t,this.formBuilderService=r,this.dialogService=o,this.messageService=se,this.confirmationService=ae,this.formBuilderPrimengService=le,this.sharedHeaderComponentConfig={},this.sharedTableComponentConfig={},this.clientsList=[],this.clientsList$=new w,this.totalData$=this.clientsStore.pipe(L(re)),this.fetchFilterdListSubscribe=new y,this.clientEnum=b,t.select(v).subscribe(de=>{this.clientsList=de.data,this.createConfigurationForTheSharedTableComponent()})}ngOnInit(){this.loadData(),this.selectClientsStore(),this.createConfigurationForTheSharedHeaderComponent(),this.createConfigurationForTheSharedTableComponent()}loadData(){console.log("loadClients this.pageEvent --------->",this.pageEvent),this.constructRequest(),this.dispatchRequest(this.request)}dispatchRequest(i){this.clientsStore.dispatch(Z({request:this.request,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows,sortBy:this.sortBy,sortOrder:this.sortOrder,filterBy:this.filterBy,filterValue:this.filterValue,findById:this.findById}))}selectClientsStore(){this.clientsList$=this.clientsStore.select(oe)}createConfigurationForTheSharedHeaderComponent(){this.sharedHeaderComponentConfig=this.headerConfigService.createConfig(new M().setTitle("Client").setShowHeader(!0).setShowTitle(!0).setShowAddButton(!0).setShowEditButton(!1).setShowDeleteButton(!1).setCustomClass("dynamic-class"))}createConfigurationForTheSharedTableComponent(){this.sharedTableComponentConfig=this.tableConfigService.createConfig(new Y().setTitle("Client").setViewType(this.viewType).setShowHeader(!0).setShowFooter(!1).setCustomClass("dynamic-class").setData(this.clientsList).setTableHeader(["id",this.clientEnum.profile_picture_url,this.clientEnum.name,this.clientEnum.email,this.clientEnum.phone,this.clientEnum.status,this.clientEnum.role,this.clientEnum.billing_address,this.clientEnum.shipping_address,this.clientEnum.last_login,this.clientEnum.date_joined]).setDataList(this.clientsList$))}createConfigurationForFormBuilderComponent(){this.formBuilderPrimengService.addPInputTextField(this.clientEnum.name,this.clientEnum.name,`Enter ${this.clientEnum.name}`,!0).addFileField(this.clientEnum.profile_picture_url,this.clientEnum.profile_picture_url,!0).addPInputTextField(this.clientEnum.email,this.clientEnum.email,`Enter ${this.clientEnum.email}`,!0).addPInputTextField(this.clientEnum.phone,this.clientEnum.phone,`Enter ${this.clientEnum.phone}`,!0).addPDropdownField(this.clientEnum.status,this.clientEnum.status,C([{id:0,name:"Active"},{id:1,name:"Inactive"},{id:2,name:"Deleted"}])).addPMultiSelectField(this.clientEnum.role,this.clientEnum.role,C([{id:0,name:"All Roles"}]),!0).addPPasswordField(this.clientEnum.password,this.clientEnum.password,`Enter ${this.clientEnum.password}`,!0).addPPasswordField(this.clientEnum.confirm_password,this.clientEnum.confirm_password,`Enter ${this.clientEnum.confirm_password}`,!0)}onAddNewBtn(i){this.createConfigurationForFormBuilderComponent(),this.ref=this.dialogService.open(x,{header:"Create Client",width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFields:"this.formBuilderService.getFormFields()"}}),this.ref.onClose.subscribe(e=>{console.log("onClose",e),e&&this.clientsStore.dispatch(te({client:e}));let t;if(e){let r=e?.buttonType;t=r?{summary:"No Product Selected",detail:`Pressed '${r}' button`}:{summary:"Product Selected",detail:e?.name}}else t={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(g(f({severity:"info"},t),{life:3e3}))}),this.ref.onMaximize.subscribe(e=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${e.maximized}`})})}onEditBtn(i){}onDeleteBtn(i){}onView(i){}onEdit(i){this.ref=this.dialogService.open(O,{header:"Update Client "+i.data.name,width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFieldsValues:i.data}}),this.ref.onClose.subscribe(e=>{e&&(e.id=i.id,e._id=i.id,this.clientsStore.dispatch(ie({id:e.id,newItem:e})));let t;if(e){let r=e?.buttonType;t=r?{summary:"No Product Selected",detail:`Pressed '${r}' button`}:{summary:"Product Selected",detail:e?.name}}else t={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(g(f({severity:"info"},t),{life:3e3}))})}onDelete(i){this.confirmationService.confirm({message:"Are you sure that you want to ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"You have accepted"}),this.clientsStore.dispatch(ne({clientId:i.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}filterQueryValues(i){console.log("filterQueryValues",i),this.clientsStore.dispatch(ee({request:i,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows})),this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe(),this.fetchFilterdListSubscribe=this.clientsStore.select(v).subscribe(e=>{console.log("fetchFilterdList --------->",e)})}onChangeViewType(i){console.log("onChangeViewType",i),this.viewType=i,this.createConfigurationForTheSharedTableComponent()}onPagePaginatorChange(i){this.pageEvent=i,this.loadData()}ngOnDestroy(){this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe()}static{this.\u0275fac=function(e){return new(e||n)(s(H),s(G),s(j),s(z),s(h),s(u),s(p),s(R))}}static{this.\u0275cmp=T({type:n,selectors:[["app-clients"]],standalone:!0,features:[P([h,u,p]),B,D],decls:9,vars:8,consts:[[3,"onAddNewBtn","onEditBtn","onDeleteBtn","config"],[3,"filterFormvalues","viewTypeValue"],[3,"onViewBtn","onEditBtn","onDeleteBtn","config","length"],["TabelContent",""],[3,"onPagePaginatorChange","length"]],template:function(e,t){e&1&&(E(0,"p-toast")(1,"p-confirmDialog"),a(2,"app-component-header",0),d("onAddNewBtn",function(o){return t.onAddNewBtn(o)})("onEditBtn",function(o){return t.onEditBtn(o)})("onDeleteBtn",function(o){return t.onDeleteBtn(o)}),l(),a(3,"app-filters",1),d("filterFormvalues",function(o){return t.filterQueryValues(o)})("viewTypeValue",function(o){return t.onChangeViewType(o)}),l(),a(4,"app-table-container",2),_(5,"async"),d("onViewBtn",function(o){return t.onView(o)})("onEditBtn",function(o){return t.onEdit(o)})("onDeleteBtn",function(o){return t.onDelete(o)}),F(6,3),l(),a(7,"app-paginator",4),_(8,"async"),d("onPagePaginatorChange",function(o){return t.onPagePaginatorChange(o)}),l()),e&2&&(c(2),m("config",t.sharedHeaderComponentConfig),c(2),m("config",t.sharedTableComponentConfig)("length",S(5,4,t.totalData$)||0),c(3),m("length",S(8,6,t.totalData$)||0))},dependencies:[V,I,A,N,q,Q,W,K,J,k,U,$]})}}return n})();export{Re as ClientsComponent};
