import{a as F,b as V,c as I,e as G,f as J,g as K}from"./chunk-G7GKDBDS.js";import{a as H}from"./chunk-MXTATJDI.js";import{b as c,c as a,l as M,m as E,n as D,o as B,s as h,t as T}from"./chunk-VHK6HW5T.js";import{r as N}from"./chunk-CBDC4O62.js";import{B as S,K as y,Z as k,_ as w,ca as v,g as C,ha as x,m as d,r as A,t as j}from"./chunk-WWR4BG2S.js";import{a as u,b as m}from"./chunk-MON7YFGF.js";var L=c("[Offer] Load Offers",a()),R=c("[Offer] Load Offers Success",a()),Q=c("[Offer] Load Offers Failure",a()),W=c("[Offer] Load Filterd Offers",a()),X=c("[Offer] Load Filterd Offers Success",a()),z=c("[Offer] Load Filterd Offers Failure",a()),Y=c("[Offer] Create Offer",a()),b=c("[Offer] Create Offer Success",a()),Z=c("[Offer] Create Offer Failure",a()),ee=c("[Offer] Update Offer",a()),P=c("[Offer] Update Offer Success",a()),te=c("[Offer] Update Offer Failure",a()),re=c("[Offer] Delete Offer",a()),q=c("[Offer] Delete Offer Success",a()),fe=c("[Offer] Delete Offer Failure",a());var l=G({selectId:e=>e._id});var U=B("offers"),{selectAll:$,selectEntities:oe,selectIds:he,selectTotal:ie}=l.getSelectors(U),Ae=D($,oe,ie,U,(e,i,t,s)=>{let{pageNo:n,pageSize:r}=s,o=(n-1)*r,f=o+r,p=e.slice(o,f);return{entities:i,total:t,pageNo:n,pageSize:r,data:p}}),Se=D($,oe,ie,U,(e,i,t,s)=>{let{pageNo:n,pageSize:r}=s,o=n*r,f=o+r,p=e.slice(o,f);return{entities:i,total:t,pageNo:n,pageSize:r,data:p}}),xe=D(U,e=>e.totalData);var g=H,ce=(()=>{class e extends J{constructor(t){super(t),this.clientDataSubject=new C([]),this.clientData$=this.clientDataSubject.asObservable()}create(t){return this.http.post(`${g.API_URL}offers.json`,t)}getAllItems(t){let{queryParams:s}=this.initializeRequest(t);return this.http.get(`${g.API_URL}offers.json`).pipe(k(n=>{this.clientDataSubject.next(n.data)}))}updateItem(t,s){return this.http.put(`${g.API_URL}offers.json`,s)}deleteItem(t){return this.http.delete(`${g.API_URL}offers.json`)}getItem(t){throw new Error("Method not implemented.")}checkPhone(t){let s={};s.phone=t,s.pageNo=50;let{queryParams:n}=this.initializeRequest(s);return this.http.get(`${g.API_URL}/offers/check-phone/${t}?${n}`)}search(t,s){let{queryParams:n}=this.initializeRequest(s);return this.http.get(`${g.API_URL}/offers/search/${t}?${n}`)}static{this.\u0275fac=function(s){return new(s||e)(x(N))}}static{this.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ue=(()=>{class e{constructor(t,s,n){this.actions$=t,this.offersService=s,this.store=n,this.getAllItems$=F(()=>this.actions$.pipe(I(L),w(this.store.pipe(E($))),y(([r,o])=>o.length===0?this.offersService.getAllItems(r.request).pipe(A(f=>{let p=f.data.map(O=>m(u({},O),{id:O.offer_id,_id:O.offer_id})),_=f.totalData;return R({offers:p,totalData:_})}),S(f=>d(z({error:f})))):d()))),this.getFilterdItems$=F(()=>this.actions$.pipe(I(W),w(this.store.pipe(E($))),y(([r,o])=>(console.log("data --->",o,r),o.length===0?this.offersService.getAllItems(r.request).pipe(A(f=>{let p=f.data.map(O=>m(u({},O),{id:O.offer_id,_id:O.offer_id})),_=f.totalData;return X({offers:p,totalData:_})}),S(f=>d(z({error:f})))):d())))),this.createOffer$=F(()=>this.actions$.pipe(I(Y),j(({offer:r})=>this.offersService.create(r).pipe(A(o=>{let f=o.data[0];return b({offer:f})}),S(o=>d(Z({error:o}))))))),this.updateOffer$=F(()=>this.actions$.pipe(I(ee),j(({id:r,newItem:o})=>this.offersService.updateItem(r,o).pipe(A(f=>{let p=f.data[0];return P({offer:p})}),S(f=>d(te({error:f}))))))),this.deleteOffer$=F(()=>this.actions$.pipe(I(re),j(({offerId:r})=>this.offersService.deleteItem(r).pipe(A(()=>q({offerId:r})),S(o=>d(fe({error:o})))))))}static{this.\u0275fac=function(s){return new(s||e)(x(V),x(ce),x(M))}}static{this.\u0275prov=v({token:e,factory:e.\u0275fac})}}return e})();var ae=l.getInitialState(new K);var Me=T(ae,h(L,(e,{pageNo:i,pageSize:t,sortBy:s,sortOrder:n,filterBy:r,filterValue:o,findById:f})=>m(u({},e),{pageNo:i,pageSize:t,loading:!0,error:null,sortBy:s,sortOrder:n,filterBy:r,filterValue:o,findById:f})),h(R,(e,{offers:i,totalData:t})=>l.setAll(i,m(u({},e),{totalData:t,loading:!1}))),h(Q,(e,{error:i})=>m(u({},e),{error:i,loading:!1})),h(b,(e,{offer:i})=>l.addOne(i,e)),h(P,(e,{offer:i})=>l.updateOne({id:i._id,changes:i},e)),h(q,(e,{offerId:i})=>l.removeOne(i,e)));export{L as a,W as b,Y as c,ee as d,re as e,oe as f,ie as g,Se as h,Ue as i,Me as j};
