import{a as S,b as v,c as x,e as H,f as N,g as V,h as D,i as G,j as J,k as F,l as K,m as Q,n as b,o as W,p as d,q as P}from"./chunk-IOVPE3NB.js";import{a as y,b as k,c as A,e as z,f as B}from"./chunk-Y2HYYDXH.js";import{l as O,m as q,s as m,t as T}from"./chunk-7C3VAOG7.js";import{a as M}from"./chunk-P7IJNKWV.js";import{F as L}from"./chunk-EEICXFOG.js";import{$ as _,C as h,L as w,_ as E,da as j,g as U,ia as f,m as c,r as u,t as $}from"./chunk-GCV2IDJ5.js";import{a as g,b as l}from"./chunk-MON7YFGF.js";var I=M,X=(()=>{class t extends z{constructor(r){super(r),this.clientDataSubject=new U([]),this.clientData$=this.clientDataSubject.asObservable()}create(r){return this.http.post(`${I.API_URL}categories.json`,r)}getAllItems(r){let{queryParams:a}=this.initializeRequest(r);return this.http.get(`${I.API_URL}categories.json`).pipe(E(n=>{this.clientDataSubject.next(n.data)}))}updateItem(r,a){return this.http.put(`${I.API_URL}categories.json`,a)}deleteItem(r){return this.http.delete(`${I.API_URL}categories.json`)}getItem(r){throw new Error("Method not implemented.")}search(r,a){let{queryParams:n}=this.initializeRequest(a);return this.http.get(`${I.API_URL}/categories/search/${r}?${n}`)}static{this.\u0275fac=function(a){return new(a||t)(f(L))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var dt=(()=>{class t{constructor(r,a,n){this.actions$=r,this.categoriesService=a,this.store=n,this.getAllItems$=y(()=>this.actions$.pipe(A(S),_(this.store.pipe(q(P))),w(([s,i])=>i.length===0?this.categoriesService.getAllItems(s.request).pipe(u(e=>{let C=e.data.map(p=>l(g({},p),{id:p.category_id,_id:p.category_id})),R=e.totalData;return v({categories:C,totalData:R})}),h(e=>c(x({error:e})))):c()))),this.getFilterdItems$=y(()=>this.actions$.pipe(A(S),_(this.store.pipe(q(P))),w(([s,i])=>i.length===0?this.categoriesService.getAllItems(s.request).pipe(u(e=>{let C=e.data.map(p=>l(g({},p),{id:p.category_id,_id:p.category_id})),R=e.totalData;return H({categories:C,totalData:R})}),h(e=>c(N({error:e})))):c()))),this.createCategory$=y(()=>this.actions$.pipe(A(V),$(({category:s})=>this.categoriesService.create(s).pipe(u(i=>{let e=i.data[0];return e.id=new Date().getTime().toString(),e._id=new Date().getTime().toString(),e.category_id=new Date().getTime().toString(),D({category:e})}),h(i=>c(G({error:i}))))))),this.updateCategory$=y(()=>this.actions$.pipe(A(J),$(({id:s,newItem:i})=>this.categoriesService.updateItem(s,i).pipe(u(e=>{let C=e.data[0];return F({category:C})}),h(e=>c(K({error:e}))))))),this.deleteCategory$=y(()=>this.actions$.pipe(A(Q),$(({categoryId:s})=>this.categoriesService.deleteItem(s).pipe(u(()=>b({categoryId:s})),h(i=>c(W({error:i})))))))}static{this.\u0275fac=function(a){return new(a||t)(f(k),f(X),f(O))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})();var Y=d.getInitialState(new B);var $t=T(Y,m(S,(t,{pageNo:o,pageSize:r,sortBy:a,sortOrder:n,filterBy:s,filterValue:i,findById:e})=>l(g({},t),{pageNo:o,pageSize:r,loading:!0,error:null,sortBy:a,sortOrder:n,filterBy:s,filterValue:i,findById:e})),m(v,(t,{categories:o,totalData:r})=>d.setAll(o,l(g({},t),{totalData:r,loading:!1}))),m(x,(t,{error:o})=>l(g({},t),{error:o,loading:!1})),m(D,(t,{category:o})=>d.addOne(o,t)),m(F,(t,{category:o})=>d.updateOne({id:o._id,changes:o},t)),m(b,(t,{categoryId:o})=>d.removeOne(o,t)));export{dt as a,$t as b};
