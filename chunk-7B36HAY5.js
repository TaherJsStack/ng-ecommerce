import{a as v,b as x,c as F,d as N,e as H,f as V,g as G,h as R,i as J,j as K,k as b,l as Q,m as W,n as q,o as X,p as u,q as w}from"./chunk-5JMAW3WA.js";import{a as f,b as M,c as A,f as B,g as C}from"./chunk-G7GKDBDS.js";import{a as z}from"./chunk-MXTATJDI.js";import{l as E,m as y,s as m,t as O}from"./chunk-VHK6HW5T.js";import{r as k}from"./chunk-CBDC4O62.js";import{B as h,K as D,Z as L,_,ca as j,g as U,ha as T,m as n,r as d,t as I}from"./chunk-WWR4BG2S.js";import{a as g,b as l}from"./chunk-MON7YFGF.js";var S=z,Y=(()=>{class t extends B{constructor(e){super(e),this.clientDataSubject=new U([]),this.clientData$=this.clientDataSubject.asObservable()}create(e){return this.http.post(`${S.API_URL}tags.json`,e)}getAllItems(e){let{queryParams:i}=this.initializeRequest(e);return this.http.get(`${S.API_URL}tags.json`).pipe(L(c=>{this.clientDataSubject.next(c.data)}))}updateItem(e,i){return this.http.put(`${S.API_URL}tags.json`,i)}deleteItem(e){return this.http.delete(`${S.API_URL}tags.json`)}getItem(e){throw new Error("Method not implemented.")}checkPhone(e){let i={};i.phone=e,i.pageNo=50;let{queryParams:c}=this.initializeRequest(i);return this.http.get(`${S.API_URL}/tags/check-phone/${e}?${c}`)}search(e,i){let{queryParams:c}=this.initializeRequest(i);return this.http.get(`${S.API_URL}/tags/search/${e}?${c}`)}static{this.\u0275fac=function(i){return new(i||t)(T(k))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var dt=(()=>{class t{constructor(e,i,c){this.actions$=e,this.tagsService=i,this.store=c,this.getAllItems$=f(()=>this.actions$.pipe(A(v),_(this.store.pipe(y(w))),D(([r,s])=>s.length===0?this.tagsService.getAllItems(r.request).pipe(d(a=>{let $=a.data.map(p=>l(g({},p),{id:p.tag_id,_id:p.tag_id})),P=a.totalData;return x({tags:$,totalData:P})}),h(a=>n(F({error:a})))):n()))),this.getFilterdItems$=f(()=>this.actions$.pipe(A(N),_(this.store.pipe(y(w))),D(([r,s])=>(console.log("data --->",s,r),s.length===0?this.tagsService.getAllItems(r.request).pipe(d(a=>{let $=a.data.map(p=>l(g({},p),{id:p.tag_id,_id:p.tag_id})),P=a.totalData;return H({tags:$,totalData:P})}),h(a=>n(V({error:a})))):n())))),this.createTag$=f(()=>this.actions$.pipe(A(G),I(({tag:r})=>this.tagsService.create(r).pipe(d(s=>{let a=s.data[0];return R({tag:a})}),h(s=>n(J({error:s}))))))),this.updateTag$=f(()=>this.actions$.pipe(A(K),I(({id:r,newItem:s})=>this.tagsService.updateItem(r,s).pipe(d(a=>{let $=a.data[0];return b({tag:$})}),h(a=>n(Q({error:a}))))))),this.deleteTag$=f(()=>this.actions$.pipe(A(W),I(({tagId:r})=>this.tagsService.deleteItem(r).pipe(d(()=>q({tagId:r})),h(s=>n(X({error:s})))))))}static{this.\u0275fac=function(i){return new(i||t)(T(M),T(Y),T(E))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})();var Z=u.getInitialState(new C);var vt=O(Z,m(v,(t,{pageNo:o,pageSize:e,sortBy:i,sortOrder:c,filterBy:r,filterValue:s,findById:a})=>l(g({},t),{pageNo:o,pageSize:e,loading:!0,error:null,sortBy:i,sortOrder:c,filterBy:r,filterValue:s,findById:a})),m(x,(t,{tags:o,totalData:e})=>u.setAll(o,l(g({},t),{totalData:e,loading:!1}))),m(F,(t,{error:o})=>l(g({},t),{error:o,loading:!1})),m(R,(t,{tag:o})=>u.addOne(o,t)),m(b,(t,{tag:o})=>u.updateOne({id:o._id,changes:o},t)),m(q,(t,{tagId:o})=>u.removeOne(o,t)));export{dt as a,vt as b};
