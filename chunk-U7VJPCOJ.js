import{a as Z}from"./chunk-2A7TADK6.js";import{A as J,B as K,E as U,F as W,G as X,c as z,d as P,e as k,f as Q,h as u,x as Y,y as x,z as G}from"./chunk-WOELEOYT.js";import{f as O}from"./chunk-J2JYHL4Y.js";import"./chunk-SPBOXIZ7.js";import"./chunk-OVNOO7LT.js";import"./chunk-LO27TSUG.js";import"./chunk-PMIXLXAC.js";import"./chunk-KDU5HLWA.js";import"./chunk-QZ6TUUVK.js";import"./chunk-W346UYTL.js";import"./chunk-PA4I2Q35.js";import"./chunk-MTU6N4QK.js";import"./chunk-YFSL42WZ.js";import{e as m,g as h}from"./chunk-7FV6G4R4.js";import"./chunk-4YRY4IP2.js";import{a as M,g as $,p as q,u as N,v as R,w as C}from"./chunk-IU2PJHCJ.js";import"./chunk-FRVBFDPB.js";import{l as I,m as A}from"./chunk-ZWB3OEA7.js";import{k as E,p as j}from"./chunk-SPWQV7SM.js";import"./chunk-R4K2WD2X.js";import{d as H}from"./chunk-E7PRHJWB.js";import{t as L,x as V}from"./chunk-XJBCGK7A.js";import{Cb as l,Ib as s,Jb as p,Kb as T,Nb as B,Rb as d,a as S,ac as w,c as v,hb as c,hc as D,ib as a,ic as F,ra as b,sc as f,tb as y,tc as g}from"./chunk-UXABPLNP.js";import"./chunk-MON7YFGF.js";var _=function(i){return i.product_id="product_id",i.name="name",i.description="description",i.category_ids="category_ids",i.branch_ids="branch_id",i.brand="brand",i.images="images",i.tags="tags",i.created_by="created_by",i.created_at="created_at",i.updated_at="updated_at",i.combinations="combinations",i}(_||{});var Oe=(()=>{class i extends Z{constructor(e,r,o,n,t,ee,te){super(),this.headerConfigService=e,this.tableConfigService=r,this.productsStore=o,this.dialogService=n,this.messageService=t,this.confirmationService=ee,this.router=te,this.sharedHeaderComponentConfig={},this.sharedTableComponentConfig={},this.productsList=[],this.productsList$=new v,this.totalData$=this.productsStore.pipe(A(R)),this.fetchFilterdListSubscribe=new S,this.productEnum=_,o.select(C).subscribe(ie=>{this.productsList=ie.data,this.createConfigurationForTheSharedTableComponent()})}ngOnInit(){this.loadData(),this.selectProductssStore(),this.createConfigurationForTheSharedHeaderComponent(),this.createConfigurationForTheSharedTableComponent()}loadData(){console.log("loadProductss this.pageEvent --------->",this.pageEvent),this.constructRequest(),this.dispatchRequest(this.request)}dispatchRequest(e){this.productsStore.dispatch(M({request:this.request,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows,sortBy:this.sortBy,sortOrder:this.sortOrder,filterBy:this.filterBy,filterValue:this.filterValue,findById:this.findById}))}selectProductssStore(){this.productsList$=this.productsStore.select(N)}createConfigurationForTheSharedHeaderComponent(){this.sharedHeaderComponentConfig=this.headerConfigService.createConfig(new z().setTitle("Products").setShowHeader(!0).setShowTitle(!0).setShowAddButton(!0).setShowEditButton(!0).setShowDeleteButton(!0).setCustomClass("dynamic-class"))}createConfigurationForTheSharedTableComponent(){this.sharedTableComponentConfig=this.tableConfigService.createConfig(new x().setTitle("Products").setViewType(this.viewType).setShowHeader(!0).setShowFooter(!1).setCustomClass("dynamic-class").setData(this.productsList).setTableHeader(["id",this.productEnum.name,this.productEnum.images,this.productEnum.description,this.productEnum.combinations,this.productEnum.created_by,this.productEnum.tags,this.productEnum.brand,this.productEnum.category_ids,this.productEnum.created_at,this.productEnum.updated_at]).setDataList(this.productsList$))}onAddNewBtn(e){this.router.navigate(["/modules/products/form"])}onEditBtn(e){}onDeleteBtn(e){}onView(e){}onEdit(e){this.router.navigate([`/modules/products/form/${e.id}`])}onDelete(e){this.confirmationService.confirm({message:"Are you sure that you want to ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"You have accepted"}),this.productsStore.dispatch(q({productId:e.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}filterQueryValues(e){console.log("filterQueryValues",e),this.productsStore.dispatch($({request:e,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows})),this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe(),this.fetchFilterdListSubscribe=this.productsStore.select(C).subscribe(r=>{console.log("fetchFilterdList --------->",r)})}onChangeViewType(e){console.log("onChangeViewType",e),this.viewType=e,this.createConfigurationForTheSharedTableComponent()}onPagePaginatorChange(e){this.pageEvent=e,this.loadData()}ngOnDestroy(){this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe()}static{this.\u0275fac=function(r){return new(r||i)(a(P),a(G),a(I),a(u),a(h),a(m),a(E))}}static{this.\u0275cmp=b({type:i,selectors:[["app-data-list"]],standalone:!0,features:[D([u,h,m]),y,F],decls:11,vars:8,consts:[[3,"onAddNewBtn","onEditBtn","onDeleteBtn","config"],[3,"filterFormvalues","viewTypeValue"],[3,"onViewBtn","onEditBtn","onDeleteBtn","config","length"],["TabelContent",""],[3,"onPagePaginatorChange","length"]],template:function(r,o){r&1&&(s(0,"p"),w(1,"data-list works!"),p(),T(2,"p-toast")(3,"p-confirmDialog"),s(4,"app-component-header",0),d("onAddNewBtn",function(t){return o.onAddNewBtn(t)})("onEditBtn",function(t){return o.onEditBtn(t)})("onDeleteBtn",function(t){return o.onDeleteBtn(t)}),p(),s(5,"app-filters",1),d("filterFormvalues",function(t){return o.filterQueryValues(t)})("viewTypeValue",function(t){return o.onChangeViewType(t)}),p(),s(6,"app-table-container",2),f(7,"async"),d("onViewBtn",function(t){return o.onView(t)})("onEditBtn",function(t){return o.onEdit(t)})("onDeleteBtn",function(t){return o.onDelete(t)}),B(8,3),p(),s(9,"app-paginator",4),f(10,"async"),d("onPagePaginatorChange",function(t){return o.onPagePaginatorChange(t)}),p()),r&2&&(c(4),l("config",o.sharedHeaderComponentConfig),c(2),l("config",o.sharedTableComponentConfig)("length",g(7,4,o.totalData$)||0),c(3),l("length",g(10,6,o.totalData$)||0))},dependencies:[V,L,H,k,Q,Y,X,W,U,K,J,O,j]})}}return i})();export{Oe as DataListComponent};
