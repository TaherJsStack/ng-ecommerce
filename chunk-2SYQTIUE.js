import{a as I,b as lt,c as $,e as it,f as at}from"./chunk-Y2HYYDXH.js";import{p as S}from"./chunk-XNY2RDZO.js";import{a as st}from"./chunk-EPTBEGN2.js";import{a as rt}from"./chunk-PNVLM6ZI.js";import{b as c,c as n,l as tt,m as X,n as y,o as et,s as u,t as ot}from"./chunk-7C3VAOG7.js";import{E as Z}from"./chunk-4BO4VVDC.js";import{$ as W,C as x,L as Q,da as P,g as Y,ia as F,m as h,r as A,t as v}from"./chunk-GCV2IDJ5.js";import{a as p,b as B}from"./chunk-MON7YFGF.js";var R=c("[Blog] Load Blogs",n()),U=c("[Blog] Load Blogs Success",n()),q=c("[Blog] Load Blogs Failure",n()),w=c("[Blog] Load Filterd Blogs",n()),O=c("[Blog] Load Filterd Blogs Success",n()),z=c("[Blog] Load Filterd Blogs Failure",n()),ct=c("[Blog] Create Blog",n()),E=c("[Blog] Create Blog Success",n()),nt=c("[Blog] Create Blog Failure",n()),At=c("[Blog] Get Blog By Id",n()),xt=c("[Blog] Get Blog By Id Success",n()),Ft=c("[Blog] Get Blog By Id Failure",n()),gt=c("[Blog] Update Blog",n()),T=c("[Blog] Update Blog Success",n()),dt=c("[Blog] Update Blog Failure",n()),pt=c("[Blog] Delete Blog",n()),C=c("[Blog] Delete Blog Success",n()),Bt=c("[Blog] Delete Blog Failure",n());var m=rt();var L=et("blogs"),{selectAll:b,selectEntities:G,selectTotal:N}=m.getSelectors(L),jt=y(b,G,N,L,(t,l,e,r)=>{let{pageNo:a,pageSize:o}=r,i=a*o,s=i+o,g=t.slice(i,s);return{entities:l,total:e,pageNo:a,pageSize:o,data:g}}),Dt=y(b,G,N,L,(t,l,e,r)=>{let{pageNo:a,pageSize:o,sortBy:i,sortOrder:s,filterBy:g,filterValue:f,findById:d}=r,k=S.createFilterStrategy(),M=S.createSortStrategy(),V=S.createPaginationStrategy(),H=k.filter(t,g,f),j=M.sort(H,i,s),D;d&&(D=j.find(K=>K.id===d));let J=V.paginate(j,a,o);return{entities:l,total:e,pageNo:a,pageSize:o,data:J,blogToFind:D}}),vt=y(b,G,N,L,(t,l,e,r)=>{let{pageNo:a,pageSize:o}=r,i=a*o,s=i+o,g=t.slice(i,s);return{entities:l,total:e,pageNo:a,pageSize:o,data:g}}),Pt=y(b,G,N,L,(t,l,e,r)=>{let{pageNo:a,pageSize:o,sortBy:i,sortOrder:s,filterBy:g,filterValue:f,findById:d}=r,k=S.createFilterStrategy(),M=S.createSortStrategy(),V=S.createPaginationStrategy(),H=k.filter(t,g,f),j=M.sort(H,i,s),D;d&&(D=j.find(K=>K.id===d));let J=V.paginate(j,a,o);return{entities:l,total:e,pageNo:a,pageSize:o,data:J,blogToFind:D}}),Rt=y(L,t=>t.entities);var _=st,mt=(()=>{class t extends it{constructor(e){super(e),this.clientDataSubject=new Y([]),this.clientData$=this.clientDataSubject.asObservable()}create(e){return this.http.post(`${_.API_URL}blogs.json`,e)}getAllItems(e){let{queryParams:r}=this.initializeRequest(e);return this.http.get(`${_.API_URL}blogs.json`,{params:r})}updateItem(e,r){return this.http.put(`${_.API_URL}blogs.json`,r)}deleteItem(e){return this.http.delete(`${_.API_URL}blogs.json`)}getItem(e){throw new Error("Method not implemented.")}checkPhone(e){let r={};r.phone=e,r.pageNo=50;let{queryParams:a}=this.initializeRequest(r);return this.http.get(`${_.API_URL}/blogs/check-phone/${e}?${a}`)}search(e,r){let{queryParams:a}=this.initializeRequest(r);return this.http.get(`${_.API_URL}/blogs/search/${e}?${a}`)}static{this.\u0275fac=function(r){return new(r||t)(F(Z))}}static{this.\u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Vt=(()=>{class t{constructor(e,r,a){this.actions$=e,this.blogsService=r,this.store=a,this.getAllItems$=I(()=>this.actions$.pipe($(R),W(this.store.pipe(X(b))),Q(([o,i])=>i.length===0?this.blogsService.getAllItems(o.request).pipe(A(s=>{let g=s.data.map(d=>B(p({},d),{id:d.blog_id,_id:d.blog_id})),f=s.totalData;return U({blogs:g,totalData:f})}),x(s=>h(q({error:s})))):h()))),this.getFilterdItems$=I(()=>this.actions$.pipe($(w),W(this.store.pipe(X(b))),Q(([o,i])=>i.length===0?this.blogsService.getAllItems(o.request).pipe(A(s=>{let g=s.data.map(d=>B(p({},d),{id:d.blog_id,_id:d.blog_id})),f=s.totalData;return O({blogs:g,totalData:f})}),x(s=>h(z({error:s})))):h()))),this.createBlog$=I(()=>this.actions$.pipe($(ct),v(({blog:o})=>{let i={_id:"BLOG00122"+new Date().getTime(),id:"BLOG00122"+new Date().getTime(),blog_id:"BLOG00122"+new Date().getTime(),title:o.title,content:o.content,author_id:"U001",created_at:"2023-09-01",updated_at:"2023-09-01",status:"published",tags:["e-commerce","trends","business"],image_url:"https://example.com/images/ecommerce_trends.jpg",category_id:"C001"};return this.blogsService.create(o).pipe(A(s=>{let g=s.data[0];return E({blog:i})}),x(s=>h(nt({error:s}))))}))),this.updateBlog$=I(()=>this.actions$.pipe($(gt),v(({id:o,newItem:i})=>{let s=i;return this.blogsService.updateItem(o,i).pipe(A(g=>{let f=g.data[0];return T({blog:s})}),x(g=>h(dt({error:g}))))}))),this.deleteBlog$=I(()=>this.actions$.pipe($(pt),v(({blogId:o})=>{let i=o;return console.log("d",i),this.blogsService.deleteItem(o).pipe(A(s=>C({blogId:i})),x(s=>h(Bt({error:s}))))})))}static{this.\u0275fac=function(r){return new(r||t)(F(lt),F(mt),F(tt))}}static{this.\u0275prov=P({token:t,factory:t.\u0275fac})}}return t})();var ft=m.getInitialState(new at);var te=ot(ft,u(R,(t,{request:l,pageNo:e,pageSize:r,sortBy:a,sortOrder:o,filterBy:i,filterValue:s,findById:g})=>B(p({},t),{request:l,pageNo:e,pageSize:r,loading:!0,error:null,sortBy:a,sortOrder:o,filterBy:i,filterValue:s,findById:g})),u(U,(t,{blogs:l,totalData:e})=>m.setAll(l,B(p({},t),{totalData:e,loading:!1}))),u(q,(t,{error:l})=>B(p({},t),{error:l,loading:!1})),u(w,(t,{request:l,pageNo:e,pageSize:r})=>B(p({},t),{request:l,pageNo:e,pageSize:r,loading:!0,error:null})),u(O,(t,{blogs:l,totalData:e})=>m.setAll(l,B(p({},t),{totalData:e,loading:!1}))),u(z,(t,{error:l})=>B(p({},t),{error:l,loading:!1})),u(E,(t,{blog:l})=>m.addOne(l,t)),u(T,(t,{blog:l})=>m.updateOne({id:l._id,changes:l},t)),u(C,(t,{blogId:l})=>m.removeOne(l,t)));export{R as a,w as b,ct as c,gt as d,pt as e,G as f,N as g,Dt as h,Pt as i,Vt as j,te as k};
