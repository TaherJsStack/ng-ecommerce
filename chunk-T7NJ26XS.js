import{a as X,b as Z,c as ee,d as te,e as ie,f as oe,g as re,h as v}from"./chunk-3FYT2EJ7.js";import{a as W}from"./chunk-24LY6ISI.js";import"./chunk-G7GKDBDS.js";import{c as N,d as $,e as z,f as k,g as h,h as x,i as S,l as O,m as R,n as Q,o as Y,p as G,q as U,r as J,s as K}from"./chunk-ZHE3RQP7.js";import"./chunk-DVDV44HM.js";import{f as H}from"./chunk-HVR775ON.js";import"./chunk-4V5UOZBX.js";import"./chunk-XNY2RDZO.js";import"./chunk-7NOMDU42.js";import{l as M,m as q}from"./chunk-VHK6HW5T.js";import{d as j}from"./chunk-OJYRZGEA.js";import"./chunk-DQONCCFF.js";import"./chunk-EQUQ7CBC.js";import{e as m,g as u}from"./chunk-XZNJALMM.js";import{K as A,l as I,o as P}from"./chunk-CBDC4O62.js";import{Eb as a,Fb as d,Gb as F,Jb as D,Nb as p,Yb as E,a as y,c as T,db as c,dc as L,eb as s,ec as V,nc as C,oa as w,oc as _,pb as B,yb as l}from"./chunk-WWR4BG2S.js";import{a as f,b as g}from"./chunk-MON7YFGF.js";var b=function(t){return t.product_id="product_id",t.name="name",t.description="description",t.price="price",t.discount_price="discount_price",t.category_id="category_id",t.branch_id="branch_id",t.brand="brand",t.weight="weight",t.stock_quantity="stock_quantity",t.sku="sku",t.images="images",t.tags="tags",t.created_by="created_by",t.created_at="created_at",t.updated_at="updated_at",t.dimensions="dimensions",t.attributes="attributes",t}(b||{});var xe=(()=>{class t extends W{constructor(o,e,i,n,r,ne,se){super(),this.headerConfigService=o,this.tableConfigService=e,this.productsStore=i,this.formBuilderService=n,this.dialogService=r,this.messageService=ne,this.confirmationService=se,this.sharedHeaderComponentConfig={},this.sharedTableComponentConfig={},this.productsList=[],this.productsList$=new T,this.totalData$=this.productsStore.pipe(q(re)),this.fetchFilterdListSubscribe=new y,this.productEnum=b,i.select(v).subscribe(ae=>{this.productsList=ae.data,this.createConfigurationForTheSharedTableComponent()})}ngOnInit(){this.loadData(),this.selectProductssStore(),this.createConfigurationForTheSharedHeaderComponent(),this.createConfigurationForTheSharedTableComponent(),this.createConfigurationForFormBuilderComponent()}loadData(){console.log("loadProductss this.pageEvent --------->",this.pageEvent),this.constructRequest(),this.dispatchRequest(this.request)}dispatchRequest(o){this.productsStore.dispatch(X({request:this.request,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows,sortBy:this.sortBy,sortOrder:this.sortOrder,filterBy:this.filterBy,filterValue:this.filterValue,findById:this.findById}))}selectProductssStore(){this.productsList$=this.productsStore.select(oe)}createConfigurationForTheSharedHeaderComponent(){this.sharedHeaderComponentConfig=this.headerConfigService.createConfig(new N().setTitle("Products").setShowHeader(!0).setShowTitle(!0).setShowAddButton(!0).setShowEditButton(!0).setShowDeleteButton(!0).setCustomClass("dynamic-class"))}createConfigurationForTheSharedTableComponent(){this.sharedTableComponentConfig=this.tableConfigService.createConfig(new R().setTitle("Products").setViewType(this.viewType).setShowHeader(!0).setShowFooter(!1).setCustomClass("dynamic-class").setData(this.productsList).setTableHeader(["id",this.productEnum.name,this.productEnum.images,this.productEnum.description,this.productEnum.created_by,this.productEnum.price,this.productEnum.tags,this.productEnum.brand,this.productEnum.discount_price,this.productEnum.sku,this.productEnum.stock_quantity,this.productEnum.weight,this.productEnum.attributes,this.productEnum.dimensions,this.productEnum.category_id,this.productEnum.created_at,this.productEnum.updated_at]).setDataList(this.productsList$))}createConfigurationForFormBuilderComponent(){this.formBuilderService.addTextField(this.productEnum.name,this.productEnum.name,`Enter ${this.productEnum.name}`,!0).addTextAreaField(this.productEnum.description,this.productEnum.description,`Enter ${this.productEnum.description}`,!0).addFileField(this.productEnum.images,this.productEnum.images,!0)}onAddNewBtn(o){this.ref=this.dialogService.open(S,{header:"Create Products",width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFields:"this.formBuilderService.getFormFields()"}}),this.ref.onClose.subscribe(e=>{console.log("onClose",e),e&&this.productsStore.dispatch(ee({product:e}));let i;if(e){let n=e?.buttonType;i=n?{summary:"No Product Selected",detail:`Pressed '${n}' button`}:{summary:"Product Selected",detail:e?.name}}else i={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(g(f({severity:"info"},i),{life:3e3}))}),this.ref.onMaximize.subscribe(e=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${e.maximized}`})})}onEditBtn(o){}onDeleteBtn(o){}onView(o){}onEdit(o){this.ref=this.dialogService.open(S,{header:"Update Products "+o.data.name,width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFieldsValues:o.data}}),this.ref.onClose.subscribe(e=>{e&&(e.id=o.id,e._id=o.id,this.productsStore.dispatch(te({id:e.id,newItem:e})));let i;if(e){let n=e?.buttonType;i=n?{summary:"No Product Selected",detail:`Pressed '${n}' button`}:{summary:"Product Selected",detail:e?.name}}else i={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(g(f({severity:"info"},i),{life:3e3}))})}onDelete(o){this.confirmationService.confirm({message:"Are you sure that you want to ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"You have accepted"}),this.productsStore.dispatch(ie({productId:o.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}filterQueryValues(o){console.log("filterQueryValues",o),this.productsStore.dispatch(Z({request:o,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows})),this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe(),this.fetchFilterdListSubscribe=this.productsStore.select(v).subscribe(e=>{console.log("fetchFilterdList --------->",e)})}onChangeViewType(o){console.log("onChangeViewType",o),this.viewType=o,this.createConfigurationForTheSharedTableComponent()}onPagePaginatorChange(o){this.pageEvent=o,this.loadData()}ngOnDestroy(){this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe()}static{this.\u0275fac=function(e){return new(e||t)(s($),s(Q),s(M),s(x),s(h),s(u),s(m))}}static{this.\u0275cmp=w({type:t,selectors:[["app-data-list"]],standalone:!0,features:[L([h,u,m]),B,V],decls:11,vars:8,consts:[[3,"onAddNewBtn","onEditBtn","onDeleteBtn","config"],[3,"filterFormvalues","viewTypeValue"],[3,"onViewBtn","onEditBtn","onDeleteBtn","config","length"],["TabelContent",""],[3,"onPagePaginatorChange","length"]],template:function(e,i){e&1&&(a(0,"p"),E(1,"data-list works!"),d(),F(2,"p-toast")(3,"p-confirmDialog"),a(4,"app-component-header",0),p("onAddNewBtn",function(r){return i.onAddNewBtn(r)})("onEditBtn",function(r){return i.onEditBtn(r)})("onDeleteBtn",function(r){return i.onDeleteBtn(r)}),d(),a(5,"app-filters",1),p("filterFormvalues",function(r){return i.filterQueryValues(r)})("viewTypeValue",function(r){return i.onChangeViewType(r)}),d(),a(6,"app-table-container",2),C(7,"async"),p("onViewBtn",function(r){return i.onView(r)})("onEditBtn",function(r){return i.onEdit(r)})("onDeleteBtn",function(r){return i.onDelete(r)}),D(8,3),d(),a(9,"app-paginator",4),C(10,"async"),p("onPagePaginatorChange",function(r){return i.onPagePaginatorChange(r)}),d()),e&2&&(c(4),l("config",i.sharedHeaderComponentConfig),c(2),l("config",i.sharedTableComponentConfig)("length",_(7,4,i.totalData$)||0),c(3),l("length",_(10,6,i.totalData$)||0))},dependencies:[P,I,j,z,k,O,K,J,U,G,Y,H,A]})}}return t})();export{xe as DataListComponent};
