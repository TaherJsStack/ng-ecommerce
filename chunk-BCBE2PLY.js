import{a as x,b as G,c as F,e as J,f as K}from"./chunk-LO27TSUG.js";import{a as H}from"./chunk-62WRAV4J.js";import{a as V}from"./chunk-FRVBFDPB.js";import{b as o,c as a,l as M,m as w,n as E,o as N,s as f,t as T}from"./chunk-ZWB3OEA7.js";import{E as O}from"./chunk-EKAGKNH6.js";import{C as S,N as P,aa as z,ba as _,fa as $,g as k,ka as b,m as B,r as A,t as g}from"./chunk-UXABPLNP.js";import{a as m,b as h}from"./chunk-MON7YFGF.js";var j=o("[Bill] Load Bills",a()),v=o("[Bill] Load Bills Success",a()),D=o("[Bill] Load Bills Failure",a()),Q=o("[Bill] Load Filterd Bills",a()),W=o("[Bill] Load Filterd Bills Success",a()),X=o("[Bill] Load Filterd Bills Failure",a()),Y=o("[Bill] Create Bill",a()),R=o("[Bill] Create Bill Success",a()),Z=o("[Bill] Create Bill Failure",a()),tt=o("[Bill] Update Bill",a()),L=o("[Bill] Update Bill Success",a()),et=o("[Bill] Update Bill Failure",a()),lt=o("[Bill] Delete Bill",a()),q=o("[Bill] Delete Bill Success",a()),it=o("[Bill] Delete Bill Failure",a());var p=V();var C=N("bills"),{selectAll:U,selectEntities:at,selectIds:ft,selectTotal:ct}=p.getSelectors(C),At=E(U,at,ct,C,(t,c,e,i)=>{let{pageNo:n,pageSize:s}=i,r=n*s,l=r+s,d=t.slice(r,l);return{entities:c,total:e,pageNo:n,pageSize:s,data:d}}),St=E(C,t=>t.totalData);var I=H,rt=(()=>{class t extends J{constructor(e){super(e),this.billDataSubject=new k([]),this.billData$=this.billDataSubject.asObservable()}create(e){return this.http.post(`${I.API_URL}bills.json`,e)}getAllItems(e){let{queryParams:i}=this.initializeRequest(e);return this.http.get(`${I.API_URL}bills.json`).pipe(z(n=>{this.billDataSubject.next(n.data)}))}updateItem(e,i){return this.http.put(`${I.API_URL}bills.json`,i)}deleteItem(e){return this.http.delete(`${I.API_URL}bills.json`)}getItem(e){throw new Error("Method not implemented.")}check(e){let i={};i.phone=e,i.pageNo=50;let{queryParams:n}=this.initializeRequest(i);return this.http.get(`${I.API_URL}/bills/check-phone/${e}?${n}`)}search(e,i){let{queryParams:n}=this.initializeRequest(i);return this.http.get(`${I.API_URL}/bills/search/${e}?${n}`)}static{this.\u0275fac=function(i){return new(i||t)(b(O))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Ut=(()=>{class t{constructor(e,i,n){this.actions$=e,this.billsService=i,this.store=n,this.getAllItems$=x(()=>this.actions$.pipe(F(j),_(this.store.pipe(w(U))),P(([s,r])=>r.length===0?this.billsService.getAllItems(s.request).pipe(A(l=>{let d=l.data.map(u=>h(m({},u),{id:u.bill_id,_id:u.bill_id})),y=l.totalData;return v({bills:d,totalData:y})}),S(l=>B(D({error:l})))):B()))),this.getFilterdItems$=x(()=>this.actions$.pipe(F(Q),_(this.store.pipe(w(U))),P(([s,r])=>r.length===0?this.billsService.getAllItems(s.request).pipe(A(l=>{let d=l.data.map(u=>h(m({},u),{id:u.bill_id,_id:u.bill_id})),y=l.totalData;return W({bills:d,totalData:y})}),S(l=>B(X({error:l})))):B()))),this.createBill$=x(()=>this.actions$.pipe(F(Y),g(({bill:s})=>this.billsService.create(s).pipe(A(r=>{let l=r.data[0];return R({bill:l})}),S(r=>B(Z({error:r}))))))),this.updateBill$=x(()=>this.actions$.pipe(F(tt),g(({id:s,newItem:r})=>this.billsService.updateItem(s,r).pipe(A(l=>{let d=l.data[0];return L({bill:d})}),S(l=>B(et({error:l}))))))),this.deleteBill$=x(()=>this.actions$.pipe(F(lt),g(({billId:s})=>this.billsService.deleteItem(s).pipe(A(()=>q({billId:s})),S(r=>B(it({error:r})))))))}static{this.\u0275fac=function(i){return new(i||t)(b(G),b(rt),b(M))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})();var ot=p.getInitialState(new K);var Ot=T(ot,f(j,(t,{pageNo:c,pageSize:e,sortBy:i,sortOrder:n,filterBy:s,filterValue:r,findById:l})=>h(m({},t),{pageNo:c,pageSize:e,loading:!0,error:null,sortBy:i,sortOrder:n,filterBy:s,filterValue:r,findById:l})),f(v,(t,{bills:c,totalData:e})=>p.setAll(c,h(m({},t),{totalData:e,loading:!1}))),f(D,(t,{error:c})=>h(m({},t),{error:c,loading:!1})),f(R,(t,{bill:c})=>p.addOne(c,t)),f(L,(t,{bill:c})=>p.updateOne({id:c._id,changes:c},t)),f(q,(t,{billId:c})=>p.removeOne(c,t)));export{j as a,Q as b,Y as c,tt as d,lt as e,at as f,ct as g,At as h,Ut as i,Ot as j};
