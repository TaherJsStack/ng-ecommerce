import"./chunk-5S7W6WD2.js";import{a as X,d as Z,g as ee,j as te,m as ie,r as oe,s as ne,t as _}from"./chunk-AVZUGMTM.js";import{a as W}from"./chunk-QP4RFEDT.js";import"./chunk-Y2HYYDXH.js";import"./chunk-PNVLM6ZI.js";import{A as G,B as U,C as k,F as x,G as J,H as K,c as H,d as M,e as N,f as $,h as u,i as q,j as z,w as O,x as R,y as Q,z as Y}from"./chunk-H37JQVY5.js";import"./chunk-A6LLAQQQ.js";import"./chunk-4OJSAVDG.js";import{f as j}from"./chunk-WUVIQKV2.js";import{l as A,m as L}from"./chunk-7C3VAOG7.js";import"./chunk-XNY2RDZO.js";import"./chunk-KINESLBU.js";import{d as V}from"./chunk-GD6QJMTW.js";import"./chunk-ESIOKCYV.js";import"./chunk-QNTLZT5W.js";import{e as c,g as h}from"./chunk-XMVNPIIY.js";import"./chunk-DL5MPEQY.js";import{t as P,x as I}from"./chunk-4BO4VVDC.js";import{Fb as s,Gb as l,Hb as w,Kb as F,Ob as d,a as T,c as b,eb as m,ec as E,fb as a,fc as D,pa as y,pc as C,qb as B,qc as S,zb as p}from"./chunk-GCV2IDJ5.js";import{a as g,b as f}from"./chunk-MON7YFGF.js";var v=function(r){return r.tag_id="tag_id",r.name="name",r.description="description",r.created_by="created_by",r.created_at="created_at",r.updated_at="updated_at",r}(v||{});var qe=(()=>{class r extends W{constructor(i,e,t,n,o,re,ae,se){super(),this.headerConfigService=i,this.tableConfigService=e,this.tagsStore=t,this.formBuilderService=n,this.dialogService=o,this.messageService=re,this.confirmationService=ae,this.formBuilderPrimengService=se,this.sharedHeaderComponentConfig={},this.sharedTableComponentConfig={},this.tagsList=[],this.tagsList$=new b,this.totalData$=this.tagsStore.pipe(L(ne)),this.fetchFilterdListSubscribe=new T,this.tagEnum=v,t.select(_).subscribe(le=>{this.tagsList=le.data,this.createConfigurationForTheSharedTableComponent()})}ngOnInit(){this.loadData(),this.selectTagsStore(),this.createConfigurationForTheSharedHeaderComponent(),this.createConfigurationForTheSharedTableComponent()}loadData(){console.log("loadTags this.pageEvent --------->",this.pageEvent),this.constructRequest(),this.dispatchRequest(this.request)}dispatchRequest(i){this.tagsStore.dispatch(X({request:this.request,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows,sortBy:this.sortBy,sortOrder:this.sortOrder,filterBy:this.filterBy,filterValue:this.filterValue,findById:this.findById}))}selectTagsStore(){this.tagsList$=this.tagsStore.select(oe)}createConfigurationForTheSharedHeaderComponent(){this.sharedHeaderComponentConfig=this.headerConfigService.createConfig(new H().setTitle("Tag").setShowHeader(!0).setShowTitle(!0).setShowAddButton(!0).setShowEditButton(!1).setShowDeleteButton(!1).setCustomClass("dynamic-class"))}createConfigurationForTheSharedTableComponent(){this.sharedTableComponentConfig=this.tableConfigService.createConfig(new Y().setTitle("Tag").setViewType(this.viewType).setShowHeader(!0).setShowFooter(!1).setCustomClass("dynamic-class").setData(this.tagsList).setTableHeader(["id",this.tagEnum.name,this.tagEnum.description,this.tagEnum.created_at,this.tagEnum.updated_at]).setDataList(this.tagsList$))}createConfigurationForFormBuilderComponent(){this.formBuilderPrimengService.addPInputTextField(this.tagEnum.name,this.tagEnum.name,`Enter ${this.tagEnum.name}`,!0).addPInputTextareaField(this.tagEnum.description,this.tagEnum.description,`Enter ${this.tagEnum.description}`,!0)}onAddNewBtn(i){this.createConfigurationForFormBuilderComponent(),this.ref=this.dialogService.open(R,{header:"Create Tag",width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFields:"this.formBuilderService.getFormFields()"}}),this.ref.onClose.subscribe(e=>{console.log("onClose",e),e&&this.tagsStore.dispatch(ee({tag:e}));let t;if(e){let n=e?.buttonType;t=n?{summary:"No Product Selected",detail:`Pressed '${n}' button`}:{summary:"Product Selected",detail:e?.name}}else t={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(f(g({severity:"info"},t),{life:3e3}))}),this.ref.onMaximize.subscribe(e=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${e.maximized}`})})}onEditBtn(i){}onDeleteBtn(i){}onView(i){}onEdit(i){this.ref=this.dialogService.open(z,{header:"Update Tag "+i.data.name,width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFieldsValues:i.data}}),this.ref.onClose.subscribe(e=>{e&&(e.id=i.id,e._id=i.id,this.tagsStore.dispatch(te({id:e.id,newItem:e})));let t;if(e){let n=e?.buttonType;t=n?{summary:"No Product Selected",detail:`Pressed '${n}' button`}:{summary:"Product Selected",detail:e?.name}}else t={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(f(g({severity:"info"},t),{life:3e3}))})}onDelete(i){this.confirmationService.confirm({message:"Are you sure that you want to ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"You have accepted"}),this.tagsStore.dispatch(ie({tagId:i.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}filterQueryValues(i){console.log("filterQueryValues",i),this.tagsStore.dispatch(Z({request:i,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows})),this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe(),this.fetchFilterdListSubscribe=this.tagsStore.select(_).subscribe(e=>{console.log("fetchFilterdList --------->",e)})}onChangeViewType(i){console.log("onChangeViewType",i),this.viewType=i,this.createConfigurationForTheSharedTableComponent()}onPagePaginatorChange(i){this.pageEvent=i,this.loadData()}ngOnDestroy(){this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe()}static{this.\u0275fac=function(e){return new(e||r)(a(M),a(G),a(A),a(q),a(u),a(h),a(c),a(O))}}static{this.\u0275cmp=y({type:r,selectors:[["app-tags"]],standalone:!0,features:[E([u,h,c]),B,D],decls:9,vars:8,consts:[[3,"onAddNewBtn","onEditBtn","onDeleteBtn","config"],[3,"filterFormvalues","viewTypeValue"],[3,"onViewBtn","onEditBtn","onDeleteBtn","config","length"],["TabelContent",""],[3,"onPagePaginatorChange","length"]],template:function(e,t){e&1&&(w(0,"p-toast")(1,"p-confirmDialog"),s(2,"app-component-header",0),d("onAddNewBtn",function(o){return t.onAddNewBtn(o)})("onEditBtn",function(o){return t.onEditBtn(o)})("onDeleteBtn",function(o){return t.onDeleteBtn(o)}),l(),s(3,"app-filters",1),d("filterFormvalues",function(o){return t.filterQueryValues(o)})("viewTypeValue",function(o){return t.onChangeViewType(o)}),l(),s(4,"app-table-container",2),C(5,"async"),d("onViewBtn",function(o){return t.onView(o)})("onEditBtn",function(o){return t.onEdit(o)})("onDeleteBtn",function(o){return t.onDelete(o)}),F(6,3),l(),s(7,"app-paginator",4),C(8,"async"),d("onPagePaginatorChange",function(o){return t.onPagePaginatorChange(o)}),l()),e&2&&(m(2),p("config",t.sharedHeaderComponentConfig),m(2),p("config",t.sharedTableComponentConfig)("length",S(5,4,t.totalData$)||0),m(3),p("length",S(8,6,t.totalData$)||0))},dependencies:[I,P,V,N,$,Q,K,J,x,k,U,j]})}}return r})();export{qe as TagsComponent};
