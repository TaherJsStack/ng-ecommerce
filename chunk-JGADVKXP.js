import{a as I,b as v,c as x,e as H,f as T,g as V,h as R,i as G,j as J,k as F,l as K,m as Q,n as q,o as W,p as u,q as w}from"./chunk-4IKZJ2XC.js";import{a as A,b as M,c as b,e as C,f as N}from"./chunk-Y2HYYDXH.js";import{a as z}from"./chunk-BS6IX7JS.js";import{l as E,m as y,s as m,t as O}from"./chunk-7C3VAOG7.js";import{E as k}from"./chunk-4BO4VVDC.js";import{$ as _,C as B,L as D,_ as L,da as j,g as U,ia as f,m as o,r as d,t as g}from"./chunk-GCV2IDJ5.js";import{a as p,b as l}from"./chunk-MON7YFGF.js";var S=z,X=(()=>{class e extends C{constructor(t){super(t),this.clientDataSubject=new U([]),this.clientData$=this.clientDataSubject.asObservable()}create(t){return this.http.post(`${S.API_URL}branches.json`,t)}getAllItems(t){let{queryParams:a}=this.initializeRequest(t);return this.http.get(`${S.API_URL}branches.json`).pipe(L(n=>{this.clientDataSubject.next(n.data)}))}updateItem(t,a){return this.http.put(`${S.API_URL}branches.json`,a)}deleteItem(t){return this.http.delete(`${S.API_URL}branches.json`)}getItem(t){throw new Error("Method not implemented.")}checkPhone(t){let a={};a.phone=t,a.pageNo=50;let{queryParams:n}=this.initializeRequest(a);return this.http.get(`${S.API_URL}/bsranches/check-phone/${t}?${n}`)}search(t,a){let{queryParams:n}=this.initializeRequest(a);return this.http.get(`${S.API_URL}/bsranches/search/${t}?${n}`)}static{this.\u0275fac=function(a){return new(a||e)(f(k))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ue=(()=>{class e{constructor(t,a,n){this.actions$=t,this.branchsService=a,this.store=n,this.getAllItems$=A(()=>this.actions$.pipe(b(I),_(this.store.pipe(y(w))),D(([s,i])=>i.length===0?this.branchsService.getAllItems(s.request).pipe(d(r=>{let $=r.data.map(h=>l(p({},h),{id:h.branch_id,_id:h.branch_id})),P=r.totalData;return v({branches:$,totalData:P})}),B(r=>o(x({error:r})))):o()))),this.getFilterdItems$=A(()=>this.actions$.pipe(b(I),_(this.store.pipe(y(w))),D(([s,i])=>i.length===0?this.branchsService.getAllItems(s.request).pipe(d(r=>{let $=r.data.map(h=>l(p({},h),{id:h.branch_id,_id:h.branch_id})),P=r.totalData;return H({branches:$,totalData:P})}),B(r=>o(T({error:r})))):o()))),this.createBranch$=A(()=>this.actions$.pipe(b(V),g(({branch:s})=>this.branchsService.create(s).pipe(d(i=>{let r=i.data[0];return R({branch:r})}),B(i=>o(G({error:i}))))))),this.updateBranch$=A(()=>this.actions$.pipe(b(J),g(({id:s,newItem:i})=>this.branchsService.updateItem(s,i).pipe(d(r=>{let $=r.data[0];return F({branch:$})}),B(r=>o(K({error:r}))))))),this.deleteBranch$=A(()=>this.actions$.pipe(b(Q),g(({branchId:s})=>this.branchsService.deleteItem(s).pipe(d(()=>q({branchId:s})),B(i=>o(W({error:i})))))))}static{this.\u0275fac=function(a){return new(a||e)(f(M),f(X),f(E))}}static{this.\u0275prov=j({token:e,factory:e.\u0275fac})}}return e})();var Y=u.getInitialState(new N);var ge=O(Y,m(I,(e,{pageNo:c,pageSize:t,sortBy:a,sortOrder:n,filterBy:s,filterValue:i,findById:r})=>l(p({},e),{pageNo:c,pageSize:t,loading:!0,error:null,sortBy:a,sortOrder:n,filterBy:s,filterValue:i,findById:r})),m(v,(e,{branches:c,totalData:t})=>u.setAll(c,l(p({},e),{totalData:t,loading:!1}))),m(x,(e,{error:c})=>l(p({},e),{error:c,loading:!1})),m(R,(e,{branch:c})=>u.addOne(c,e)),m(F,(e,{branch:c})=>u.updateOne({id:c._id,changes:c},e)),m(q,(e,{branchId:c})=>u.removeOne(c,e)));export{ue as a,ge as b};
