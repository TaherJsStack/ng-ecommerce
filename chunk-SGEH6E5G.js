import"./chunk-GWBMDOF6.js";import{a as Z,g as ee,j as te,p as ie,u as oe,v as re,w as C}from"./chunk-AQZREA66.js";import{a as X}from"./chunk-56GU4Z4C.js";import"./chunk-Y2HYYDXH.js";import"./chunk-PNVLM6ZI.js";import{A as Y,B as G,C as J,F as K,G as U,H as W,c as N,d as z,e as k,f as P,h,i as R,j as x,y as O,z as Q}from"./chunk-UO2IZ7KW.js";import"./chunk-A3IZZUYD.js";import"./chunk-7HUMFHBN.js";import{f as H}from"./chunk-OHFRBG3E.js";import{l as M,m as q}from"./chunk-7C3VAOG7.js";import"./chunk-XNY2RDZO.js";import"./chunk-P7IJNKWV.js";import{d as A}from"./chunk-GD6QJMTW.js";import"./chunk-7LEQAJN3.js";import"./chunk-6LIPBLOC.js";import{e as m,g as u}from"./chunk-AOODTV4H.js";import{k as j,p as $}from"./chunk-QBCOU3F6.js";import{t as V,y as I}from"./chunk-EEICXFOG.js";import{Fb as a,Gb as d,Hb as w,Kb as D,Ob as p,Zb as F,a as b,c as y,eb as c,ec as E,fb as s,fc as L,pa as T,pc as f,qb as B,qc as g,zb as l}from"./chunk-GCV2IDJ5.js";import{a as S,b as v}from"./chunk-MON7YFGF.js";var _=function(e){return e.product_id="product_id",e.name="name",e.description="description",e.price="price",e.discount_price="discount_price",e.category_id="category_id",e.branch_id="branch_id",e.brand="brand",e.weight="weight",e.stock_quantity="stock_quantity",e.sku="sku",e.images="images",e.tags="tags",e.created_by="created_by",e.created_at="created_at",e.updated_at="updated_at",e.dimensions="dimensions",e.attributes="attributes",e}(_||{});var Oe=(()=>{class e extends X{constructor(t,r,i,n,o,ne,se,ae){super(),this.headerConfigService=t,this.tableConfigService=r,this.productsStore=i,this.formBuilderService=n,this.dialogService=o,this.messageService=ne,this.confirmationService=se,this.router=ae,this.sharedHeaderComponentConfig={},this.sharedTableComponentConfig={},this.productsList=[],this.productsList$=new y,this.totalData$=this.productsStore.pipe(q(re)),this.fetchFilterdListSubscribe=new b,this.productEnum=_,i.select(C).subscribe(de=>{this.productsList=de.data,this.createConfigurationForTheSharedTableComponent()})}ngOnInit(){this.loadData(),this.selectProductssStore(),this.createConfigurationForTheSharedHeaderComponent(),this.createConfigurationForTheSharedTableComponent(),this.createConfigurationForFormBuilderComponent()}loadData(){console.log("loadProductss this.pageEvent --------->",this.pageEvent),this.constructRequest(),this.dispatchRequest(this.request)}dispatchRequest(t){this.productsStore.dispatch(Z({request:this.request,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows,sortBy:this.sortBy,sortOrder:this.sortOrder,filterBy:this.filterBy,filterValue:this.filterValue,findById:this.findById}))}selectProductssStore(){this.productsList$=this.productsStore.select(oe)}createConfigurationForTheSharedHeaderComponent(){this.sharedHeaderComponentConfig=this.headerConfigService.createConfig(new N().setTitle("Products").setShowHeader(!0).setShowTitle(!0).setShowAddButton(!0).setShowEditButton(!0).setShowDeleteButton(!0).setCustomClass("dynamic-class"))}createConfigurationForTheSharedTableComponent(){this.sharedTableComponentConfig=this.tableConfigService.createConfig(new Q().setTitle("Products").setViewType(this.viewType).setShowHeader(!0).setShowFooter(!1).setCustomClass("dynamic-class").setData(this.productsList).setTableHeader(["id",this.productEnum.name,this.productEnum.images,this.productEnum.description,this.productEnum.created_by,this.productEnum.price,this.productEnum.tags,this.productEnum.brand,this.productEnum.discount_price,this.productEnum.sku,this.productEnum.stock_quantity,this.productEnum.weight,this.productEnum.attributes,this.productEnum.dimensions,this.productEnum.category_id,this.productEnum.created_at,this.productEnum.updated_at]).setDataList(this.productsList$))}createConfigurationForFormBuilderComponent(){this.formBuilderService.addTextField(this.productEnum.name,this.productEnum.name,`Enter ${this.productEnum.name}`,!0).addTextAreaField(this.productEnum.description,this.productEnum.description,`Enter ${this.productEnum.description}`,!0).addFileField(this.productEnum.images,this.productEnum.images,!0)}onAddNewBtn(t){this.ref=this.dialogService.open(x,{header:"Create Products",width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFields:"this.formBuilderService.getFormFields()"}}),this.ref.onClose.subscribe(r=>{console.log("onClose",r),r&&this.productsStore.dispatch(te({product:r}));let i;if(r){let n=r?.buttonType;i=n?{summary:"No Product Selected",detail:`Pressed '${n}' button`}:{summary:"Product Selected",detail:r?.name}}else i={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(v(S({severity:"info"},i),{life:3e3}))}),this.ref.onMaximize.subscribe(r=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${r.maximized}`})})}onEditBtn(t){}onDeleteBtn(t){}onView(t){this.router.navigate([`/modules/products/form/${t}`])}onEdit(t){this.router.navigate([`/modules/products/form/${t.id}`])}onDelete(t){this.confirmationService.confirm({message:"Are you sure that you want to ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"You have accepted"}),this.productsStore.dispatch(ie({productId:t.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}filterQueryValues(t){console.log("filterQueryValues",t),this.productsStore.dispatch(ee({request:t,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows})),this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe(),this.fetchFilterdListSubscribe=this.productsStore.select(C).subscribe(r=>{console.log("fetchFilterdList --------->",r)})}onChangeViewType(t){console.log("onChangeViewType",t),this.viewType=t,this.createConfigurationForTheSharedTableComponent()}onPagePaginatorChange(t){this.pageEvent=t,this.loadData()}ngOnDestroy(){this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)(s(z),s(Y),s(M),s(R),s(h),s(u),s(m),s(j))}}static{this.\u0275cmp=T({type:e,selectors:[["app-data-list"]],standalone:!0,features:[E([h,u,m]),B,L],decls:11,vars:8,consts:[[3,"onAddNewBtn","onEditBtn","onDeleteBtn","config"],[3,"filterFormvalues","viewTypeValue"],[3,"onViewBtn","onEditBtn","onDeleteBtn","config","length"],["TabelContent",""],[3,"onPagePaginatorChange","length"]],template:function(r,i){r&1&&(a(0,"p"),F(1,"data-list works!"),d(),w(2,"p-toast")(3,"p-confirmDialog"),a(4,"app-component-header",0),p("onAddNewBtn",function(o){return i.onAddNewBtn(o)})("onEditBtn",function(o){return i.onEditBtn(o)})("onDeleteBtn",function(o){return i.onDeleteBtn(o)}),d(),a(5,"app-filters",1),p("filterFormvalues",function(o){return i.filterQueryValues(o)})("viewTypeValue",function(o){return i.onChangeViewType(o)}),d(),a(6,"app-table-container",2),f(7,"async"),p("onViewBtn",function(o){return i.onView(o)})("onEditBtn",function(o){return i.onEdit(o)})("onDeleteBtn",function(o){return i.onDelete(o)}),D(8,3),d(),a(9,"app-paginator",4),f(10,"async"),p("onPagePaginatorChange",function(o){return i.onPagePaginatorChange(o)}),d()),r&2&&(c(4),l("config",i.sharedHeaderComponentConfig),c(2),l("config",i.sharedTableComponentConfig)("length",g(7,4,i.totalData$)||0),c(3),l("length",g(10,6,i.totalData$)||0))},dependencies:[I,V,A,k,P,O,W,U,K,J,G,H,$]})}}return e})();export{Oe as DataListComponent};
