import{a as te}from"./chunk-LYIEBZII.js";import{A as J,B as K,E as W,F as X,G as Z,H as ee,c as N,d as M,e as z,f as x,h as p,i as q,j as O,v as R,w as Q,x as Y,y as G,z as U}from"./chunk-DFMEOWCO.js";import{f as k}from"./chunk-7B2LA7N4.js";import"./chunk-Y7MV3CSA.js";import"./chunk-WQ47TM7T.js";import{a as ie,d as ne,g as oe,j as re,m as ae,r as se,s as ce,t as _}from"./chunk-JHWSTTDQ.js";import"./chunk-5SPO2ULR.js";import"./chunk-PMIXLXAC.js";import"./chunk-FDANLT4R.js";import"./chunk-LB2C25I3.js";import"./chunk-GL5CIJKG.js";import"./chunk-Q77QSA2R.js";import"./chunk-YBXBVZSY.js";import"./chunk-MZE32LOX.js";import"./chunk-S6EMH63M.js";import"./chunk-RAWSUYSJ.js";import{e as d,g as u}from"./chunk-H3ONGKXQ.js";import"./chunk-4YRY4IP2.js";import"./chunk-L7L4RKUY.js";import{l as A,m as j}from"./chunk-5JVEGXLZ.js";import"./chunk-BXWG62GK.js";import"./chunk-I3TFT3JE.js";import{d as $}from"./chunk-DB6LPKCG.js";import{t as L,x as V}from"./chunk-YR4PHHHU.js";import{Db as m,Jb as s,Kb as c,Lb as P,Ob as D,Sb as l,a as y,c as B,ib as h,ic as I,jb as a,jc as H,m as T,ra as w,tc as g,ub as F,uc as C}from"./chunk-W3XNKEV5.js";import{a as f,b}from"./chunk-MON7YFGF.js";var S=function(n){return n.branch_id="branch_id",n.name="name",n.contact_number="contact_number",n.manager_id="manager_id",n.email="email",n.location="location",n.working_hours="working_hours",n.created_by="created_by",n.created_at="created_at",n.updated_at="updated_at",n}(S||{});var E=function(n){return n.open="open",n.close="close",n}(E||{});var Re=(()=>{class n extends te{constructor(i,e,t,r,o,le,he,me){super(),this.headerConfigService=i,this.tableConfigService=e,this.branchesStore=t,this.formBuilderService=r,this.dialogService=o,this.messageService=le,this.confirmationService=he,this.formBuilderPrimengService=me,this.sharedHeaderComponentConfig={},this.sharedTableComponentConfig={},this.branchesList=[],this.branchesList$=new B,this.totalData$=this.branchesStore.pipe(j(ce)),this.fetchFilterdListSubscribe=new y,this.branchEnum=S,this.locationEnum=ee,this.workingHoursEnum=E,t.select(_).subscribe(v=>{console.log("fetchListPaginationSuccess branchesStore --------->",v),this.branchesList=v.data,this.createConfigurationForTheSharedTableComponent()})}ngOnInit(){this.loadData(),this.selectBranchesStore(),this.createConfigurationForTheSharedHeaderComponent(),this.createConfigurationForTheSharedTableComponent()}loadData(){console.log("loadBranches this.pageEvent --------->",this.pageEvent),this.constructRequest(),this.dispatchRequest(this.request)}dispatchRequest(i){this.branchesStore.dispatch(ie({request:this.request,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows,sortBy:this.sortBy,sortOrder:this.sortOrder,filterBy:this.filterBy,filterValue:this.filterValue,findById:this.findById}))}selectBranchesStore(){this.branchesList$=this.branchesStore.select(se)}createConfigurationForTheSharedHeaderComponent(){this.sharedHeaderComponentConfig=this.headerConfigService.createConfig(new N().setTitle("Branch").setShowHeader(!0).setShowTitle(!0).setShowAddButton(!0).setShowEditButton(!1).setShowDeleteButton(!1).setCustomClass("dynamic-class"))}createConfigurationForTheSharedTableComponent(){console.log("createConfigurationForTheSharedTableComponent",this.branchesList),this.sharedTableComponentConfig=this.tableConfigService.createConfig(new G().setTitle("Branch").setViewType(this.viewType).setShowHeader(!0).setShowFooter(!1).setCustomClass("dynamic-class").setData(this.branchesList).setTableHeader(["id",this.branchEnum.name,this.branchEnum.contact_number,this.branchEnum.email,this.branchEnum.manager_id,this.branchEnum.location,this.branchEnum.location+"."+this.locationEnum.city,this.branchEnum.location+"."+this.locationEnum.country,this.branchEnum.location+"."+this.locationEnum.state,this.branchEnum.location+"."+this.locationEnum.street,this.branchEnum.location+"."+this.locationEnum.zip_code,this.branchEnum.working_hours+"."+this.workingHoursEnum.open,this.branchEnum.working_hours+"."+this.workingHoursEnum.close,this.branchEnum.created_at,this.branchEnum.updated_at]).setDataList(this.branchesList$))}createConfigurationForFormBuilderComponent(){console.log("createConfigurationForFormBuilderComponent"),this.formBuilderPrimengService.addPInputTextField(this.branchEnum.name,this.branchEnum.name,`Enter ${this.branchEnum.name}`,!0).addPInputTextField(this.branchEnum.email,this.branchEnum.email,`Enter ${this.branchEnum.email}`,!0).addPInputNumberField(this.branchEnum.contact_number,this.branchEnum.contact_number,`Enter ${this.branchEnum.contact_number}`,!0).addPDropdownField(this.branchEnum.manager_id,this.branchEnum.manager_id,T([{id:"sssss",name:"sssss"},{id:"sssss",name:"sssss"},{id:"sssss",name:"sssss"}])).addPInputTextField(this.locationEnum.city,this.locationEnum.city,`Enter ${this.locationEnum.city}`,!0).addPInputTextField(this.locationEnum.country,this.locationEnum.country,`Enter ${this.locationEnum.country}`,!0).addPInputTextField(this.locationEnum.state,this.locationEnum.state,`Enter ${this.locationEnum.state}`,!0).addPInputTextField(this.locationEnum.street,this.locationEnum.street,`Enter ${this.locationEnum.street}`,!0).addPInputTextField(this.locationEnum.zip_code,this.locationEnum.zip_code,`Enter ${this.locationEnum.zip_code}`,!0).addPInputTextField(this.workingHoursEnum.open,this.workingHoursEnum.open,`Enter ${this.workingHoursEnum.open}`,!0).addPInputTextField(this.workingHoursEnum.close,this.workingHoursEnum.close,`Enter ${this.workingHoursEnum.close}`,!0).buildForm()}onAddNewBtn(i){this.createConfigurationForFormBuilderComponent(),this.ref=this.dialogService.open(Q,{header:"Create Branch",width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFields:"this.formBuilderService.getFormFields()"}}),this.ref.onClose.subscribe(e=>{console.log("onClose",e),e&&this.branchesStore.dispatch(oe({branch:e}));let t;if(e){let r=e?.buttonType;t=r?{summary:"No Product Selected",detail:`Pressed '${r}' button`}:{summary:"Product Selected",detail:e?.name}}else t={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(b(f({severity:"info"},t),{life:3e3}))}),this.ref.onMaximize.subscribe(e=>{this.messageService.add({severity:"info",summary:"Maximized",detail:`maximized: ${e.maximized}`})})}onEditBtn(i){}onDeleteBtn(i){}onView(i){}onEdit(i){this.ref=this.dialogService.open(O,{header:"Update Branch "+i.data.name,width:"40vw",modal:!0,closable:!0,contentStyle:{overflow:"auto"},data:{formFieldsValues:i.data}}),this.ref.onClose.subscribe(e=>{e&&(e.id=i.id,e._id=i.id,this.branchesStore.dispatch(re({id:e.id,newItem:e})));let t;if(e){let r=e?.buttonType;t=r?{summary:"No Product Selected",detail:`Pressed '${r}' button`}:{summary:"Product Selected",detail:e?.name}}else t={summary:"No Product Selected",detail:"Pressed Close button"};this.messageService.add(b(f({severity:"info"},t),{life:3e3}))})}onDelete(i){this.confirmationService.confirm({message:"Are you sure that you want to ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.messageService.add({severity:"info",summary:"Confirmed",detail:"You have accepted"}),this.branchesStore.dispatch(ae({branchId:i.id}))},reject:()=>{this.messageService.add({severity:"error",summary:"Rejected",detail:"You have rejected",life:3e3})}})}filterQueryValues(i){console.log("filterQueryValues",i),this.branchesStore.dispatch(ne({request:i,pageNo:this.pageEvent.page,pageSize:this.pageEvent.rows})),this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe(),this.fetchFilterdListSubscribe=this.branchesStore.select(_).subscribe(e=>{console.log("fetchFilterdList --------->",e)})}onChangeViewType(i){console.log("onChangeViewType",i),this.viewType=i,this.createConfigurationForTheSharedTableComponent()}onPagePaginatorChange(i){this.pageEvent=i,this.loadData()}ngOnDestroy(){this.fetchFilterdListSubscribe&&this.fetchFilterdListSubscribe.unsubscribe()}static{this.\u0275fac=function(e){return new(e||n)(a(M),a(U),a(A),a(q),a(p),a(u),a(d),a(R))}}static{this.\u0275cmp=w({type:n,selectors:[["app-branches"]],standalone:!0,features:[I([p,u,d]),F,H],decls:9,vars:8,consts:[[3,"onAddNewBtn","onEditBtn","onDeleteBtn","config"],[3,"filterFormvalues","viewTypeValue"],[3,"onViewBtn","onEditBtn","onDeleteBtn","config","length"],["TabelContent",""],[3,"onPagePaginatorChange","length"]],template:function(e,t){e&1&&(P(0,"p-toast")(1,"p-confirmDialog"),s(2,"app-component-header",0),l("onAddNewBtn",function(o){return t.onAddNewBtn(o)})("onEditBtn",function(o){return t.onEditBtn(o)})("onDeleteBtn",function(o){return t.onDeleteBtn(o)}),c(),s(3,"app-filters",1),l("filterFormvalues",function(o){return t.filterQueryValues(o)})("viewTypeValue",function(o){return t.onChangeViewType(o)}),c(),s(4,"app-table-container",2),g(5,"async"),l("onViewBtn",function(o){return t.onView(o)})("onEditBtn",function(o){return t.onEdit(o)})("onDeleteBtn",function(o){return t.onDelete(o)}),D(6,3),c(),s(7,"app-paginator",4),g(8,"async"),l("onPagePaginatorChange",function(o){return t.onPagePaginatorChange(o)}),c()),e&2&&(h(2),m("config",t.sharedHeaderComponentConfig),h(2),m("config",t.sharedTableComponentConfig)("length",C(5,4,t.totalData$)||0),h(3),m("length",C(8,6,t.totalData$)||0))},dependencies:[V,L,$,z,x,Y,Z,X,W,K,J,k]})}}return n})();export{Re as BranchesComponent};
