import{a as v,b as x,c as F,d as N,e as H,f as V,g as G,h as R,i as J,j as K,k as b,l as Q,m as W,n as q,o as X,p as u,q as w}from"./chunk-DRGZF5GV.js";import{a as f,b as M,c as A,e as B,f as C}from"./chunk-LO27TSUG.js";import{a as z}from"./chunk-62WRAV4J.js";import{l as E,m as y,s as m,t as O}from"./chunk-ZWB3OEA7.js";import{E as k}from"./chunk-EKAGKNH6.js";import{C as h,N as D,aa as L,ba as _,fa as j,g as U,ka as T,m as n,r as d,t as I}from"./chunk-UXABPLNP.js";import{a as g,b as l}from"./chunk-MON7YFGF.js";var S=z,Y=(()=>{class t extends B{constructor(e){super(e),this.clientDataSubject=new U([]),this.clientData$=this.clientDataSubject.asObservable()}create(e){return this.http.post(`${S.API_URL}tags.json`,e)}getAllItems(e){let{queryParams:i}=this.initializeRequest(e);return this.http.get(`${S.API_URL}tags.json`).pipe(L(c=>{this.clientDataSubject.next(c.data)}))}updateItem(e,i){return this.http.put(`${S.API_URL}tags.json`,i)}deleteItem(e){return this.http.delete(`${S.API_URL}tags.json`)}getItem(e){throw new Error("Method not implemented.")}checkPhone(e){let i={};i.phone=e,i.pageNo=50;let{queryParams:c}=this.initializeRequest(i);return this.http.get(`${S.API_URL}/tags/check-phone/${e}?${c}`)}search(e,i){let{queryParams:c}=this.initializeRequest(i);return this.http.get(`${S.API_URL}/tags/search/${e}?${c}`)}static{this.\u0275fac=function(i){return new(i||t)(T(k))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var dt=(()=>{class t{constructor(e,i,c){this.actions$=e,this.tagsService=i,this.store=c,this.getAllItems$=f(()=>this.actions$.pipe(A(v),_(this.store.pipe(y(w))),D(([o,s])=>s.length===0?this.tagsService.getAllItems(o.request).pipe(d(a=>{let $=a.data.map(p=>l(g({},p),{id:p.tag_id,_id:p.tag_id})),P=a.totalData;return x({tags:$,totalData:P})}),h(a=>n(F({error:a})))):n()))),this.getFilterdItems$=f(()=>this.actions$.pipe(A(N),_(this.store.pipe(y(w))),D(([o,s])=>s.length===0?this.tagsService.getAllItems(o.request).pipe(d(a=>{let $=a.data.map(p=>l(g({},p),{id:p.tag_id,_id:p.tag_id})),P=a.totalData;return H({tags:$,totalData:P})}),h(a=>n(V({error:a})))):n()))),this.createTag$=f(()=>this.actions$.pipe(A(G),I(({tag:o})=>this.tagsService.create(o).pipe(d(s=>{let a=s.data[0];return R({tag:a})}),h(s=>n(J({error:s}))))))),this.updateTag$=f(()=>this.actions$.pipe(A(K),I(({id:o,newItem:s})=>this.tagsService.updateItem(o,s).pipe(d(a=>{let $=a.data[0];return b({tag:$})}),h(a=>n(Q({error:a}))))))),this.deleteTag$=f(()=>this.actions$.pipe(A(W),I(({tagId:o})=>this.tagsService.deleteItem(o).pipe(d(()=>q({tagId:o})),h(s=>n(X({error:s})))))))}static{this.\u0275fac=function(i){return new(i||t)(T(M),T(Y),T(E))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})();var Z=u.getInitialState(new C);var vt=O(Z,m(v,(t,{pageNo:r,pageSize:e,sortBy:i,sortOrder:c,filterBy:o,filterValue:s,findById:a})=>l(g({},t),{pageNo:r,pageSize:e,loading:!0,error:null,sortBy:i,sortOrder:c,filterBy:o,filterValue:s,findById:a})),m(x,(t,{tags:r,totalData:e})=>u.setAll(r,l(g({},t),{totalData:e,loading:!1}))),m(F,(t,{error:r})=>l(g({},t),{error:r,loading:!1})),m(R,(t,{tag:r})=>u.addOne(r,t)),m(b,(t,{tag:r})=>u.updateOne({id:r._id,changes:r},t)),m(q,(t,{tagId:r})=>u.removeOne(r,t)));export{dt as a,vt as b};
